<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0072)http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#null -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>模型字段参考 — Django 1.8.2 中文文档</title><link href="./default(1).css" rel="stylesheet" type="text/css"><link href="./pygments(1).css" rel="stylesheet" type="text/css"><script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.8.2.dev20150513143415',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script><script src="./jquery.js(1).下载" type="text/javascript"></script><script src="./underscore.js(1).下载" type="text/javascript"></script><script src="./doctools.js(1).下载" type="text/javascript"></script><link href="http://python.usyiyi.cn/documents/django_182/index.html" rel="top" title="Django 1.8.2.dev20150513143415 documentation"><link href="http://python.usyiyi.cn/documents/django_182/ref/models/index.html" rel="up" title="Models"><link href="http://python.usyiyi.cn/documents/django_182/ref/models/meta.html" rel="next" title="Model _meta API"><link href="http://python.usyiyi.cn/documents/django_182/ref/models/index.html" rel="prev" title="Models"><script src="./templatebuiltins.js(1).下载" type="text/javascript"></script><script type="text/javascript">
(function($) {
    if (!django_template_builtins) {
       // templatebuiltins.js missing, do nothing.
       return;
    }
    $(document).ready(function() {
        // Hyperlink Django template tags and filters
        var base = "../templates/builtins.html";
        if (base == "#") {
            // Special case for builtins.html itself
            base = "";
        }
        // Tags are keywords, class '.k'
        $("div.highlight\\-html\\+django span.k").each(function(i, elem) {
             var tagname = $(elem).text();
             if ($.inArray(tagname, django_template_builtins.ttags) != -1) {
                 var fragment = tagname.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + tagname + "</a>");
             }
        });
        // Filters are functions, class '.nf'
        $("div.highlight\\-html\\+django span.nf").each(function(i, elem) {
             var filtername = $(elem).text();
             if ($.inArray(filtername, django_template_builtins.tfilters) != -1) {
                 var fragment = filtername.replace(/_/, '-');
                 $(elem).html("<a href='" + base + "#" + fragment + "'>" + filtername + "</a>");
             }
        });
    });
})(jQuery);
</script></head><body>
<div class="document">
<div class="yui-t6" id="custom-doc">
<div id="hd">
<h1><span class="yiyi-st" id="yiyi-568">Django 1.8.2 文档</span></h1>
<div id="global-nav">
<a href="http://python.usyiyi.cn/documents/django_182/index.html" title="Home page">Home</a>  |
        <a href="http://python.usyiyi.cn/documents/django_182/contents.html" title="Table of contents">Table of contents</a>  |
        <a href="http://python.usyiyi.cn/documents/django_182/genindex.html" title="Global index">Index</a>  |
        <a href="http://python.usyiyi.cn/documents/django_182/py-modindex.html" title="Module index">Modules</a>
</div>
<div class="nav">
    « <a href="http://python.usyiyi.cn/documents/django_182/ref/models/index.html" title="Models">previous</a>
     |
    <a accesskey="U" href="http://python.usyiyi.cn/documents/django_182/ref/index.html" title="API Reference">up</a>
   |
    <a href="http://python.usyiyi.cn/documents/django_182/ref/models/meta.html" title="Model &lt;tt class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;_meta&lt;/span&gt;&lt;/tt&gt; API">next</a> »</div>
</div>
<div id="bd">
<div id="yui-main">
<div class="yui-b">
<div class="yui-g" id="ref-models-fields">
<div class="section" id="s-module-django.db.models.fields">
<span id="s-model-field-reference"></span><span id="module-django.db.models.fields"></span><span id="model-field-reference"></span><h1><span class="yiyi-st" id="yiyi-569">模型字段参考</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#module-django.db.models.fields" title="Permalink to this headline">¶</a></h1>
<p><span class="yiyi-st" id="yiyi-1">
本文档包含了Django提供的全部模型<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><tt class="xref py py-class docutils literal"><span class="pre">字段</span></tt></a>的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-options">字段选项</a> 和 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-types">字段类型</a>的API参考。</span></p>
<div class="admonition seealso">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-2">请看:</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-3" style="">如果内建的字段不能满足你的需要，你可以尝试包含对特定国家和文化有帮助的配套代码的 django-localflavor。<a class="reference external" href="https://django-localflavor.readthedocs.org/"></a></span><span class="yiyi-st" id="yiyi-4" style="">当然，你也可以很容易的编写你<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html"><em>自定义的字段</em></a>。</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-5">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-6">严格意义上来讲， Model 是定义在<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#module-django.db.models.fields" title="django.db.models.fields: Built-in field types."><tt class="xref py py-mod docutils literal"><span class="pre">django.db.models.fields</span></tt></a>里面，但为了使用方便，它们被导入到 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/models.html#module-django.db.models" title="django.db.models"><tt class="xref py py-mod docutils literal"><span class="pre">django.db.models</span></tt></a>中；</span><span class="yiyi-st" id="yiyi-7">标准上，我们导入<tt class="docutils literal"><span class="pre">from</span> <span class="pre">django.db</span> <span class="pre">import</span> <span class="pre">models</span></tt>，然后使用&nbsp;<tt class="docutils literal"><span class="pre">models.&lt;Foo&gt;Field</span></tt>的形式使用字段。</span></p>
</div>
<div class="section" id="s-field-options">
<span id="s-common-model-field-options"></span><span id="field-options"></span><span id="common-model-field-options"></span><h2><span class="yiyi-st" id="yiyi-571">字段选项(Field options)</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-options" title="Permalink to this headline">¶</a></h2>
<p><span class="yiyi-st" id="yiyi-8">下列参数是全部字段类型都可用的，</span><span class="yiyi-st" id="yiyi-9">而且都是可选择的。</span></p>
<div class="section" id="s-null">
<span id="null"></span><h3><span class="yiyi-st" id="yiyi-577">null</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#null" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.null">
<tt class="descclassname">Field.</tt><tt class="descname">null</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-10">如果为<tt class="docutils literal"><span class="pre">True</span></tt>，Django将在数据库中将空值存储为<tt class="docutils literal"><span class="pre">NULL</span></tt>。</span><span class="yiyi-st" id="yiyi-11">默认值是 <tt class="docutils literal"><span class="pre">False</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-12">字符串字段例如<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> 和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.TextField" title="django.db.models.TextField"><tt class="xref py py-class docutils literal"><span class="pre">TextField</span></tt></a> 要避免使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a>，因为空字符串值将始终储存为空字符串而不是<tt class="docutils literal"><span class="pre">NULL</span></tt>。</span><span class="yiyi-st" id="yiyi-13">如果字符串字段的<tt class="docutils literal"><span class="pre">null=True</span></tt>，那意味着对于“无数据”有两个可能的值：<tt class="docutils literal"><span class="pre">NULL</span></tt> 和空字符串。</span><span class="yiyi-st" id="yiyi-14">在大多数情况下，对于“无数据”声明两个值是赘余的，Django 的惯例是使用空字符串而不是<tt class="docutils literal"><span class="pre">NULL</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-15">无论是字符串字段还是非字符串字段，如果你希望在表单中允许空值，你将还需要设置<tt class="docutils literal"><span class="pre">blank=True</span></tt>，因为<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> 仅仅影响数据库存储（参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><tt class="xref py py-attr docutils literal"><span class="pre">blank</span></tt></a>）。</span></p>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-16">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-17">在使用Oracle 数据库时，数据库将存储<tt class="docutils literal"><span class="pre">NULL</span></tt> 来表示空字符串，而与这个属性无关。</span></p>
</div>
<p><span class="yiyi-st" id="yiyi-18">如果你希望<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.BooleanField" title="django.db.models.BooleanField"><tt class="xref py py-class docutils literal"><span class="pre">BooleanField</span></tt></a> 接受<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> 值，请用 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.NullBooleanField" title="django.db.models.NullBooleanField"><tt class="xref py py-class docutils literal"><span class="pre">NullBooleanField</span></tt></a> 代替。</span></p>
</div>
<div class="section" id="s-blank">
<span id="blank"></span><h3><span class="yiyi-st" id="yiyi-578">blank</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#blank" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.blank">
<tt class="descclassname">Field.</tt><tt class="descname">blank</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.blank" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-19">如果为<tt class="docutils literal"><span class="pre">True</span></tt>，则该字段允许为空白。 </span><span class="yiyi-st" id="yiyi-20">默认值是 <tt class="docutils literal"><span class="pre">False</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-21">注意它与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a>不同。</span><span class="yiyi-st" id="yiyi-22"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> 纯粹是数据库范畴的概念，而<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><tt class="xref py py-attr docutils literal"><span class="pre">blank</span></tt></a> 是数据验证范畴的。</span><span class="yiyi-st" id="yiyi-23">如果字段设置<tt class="docutils literal"><span class="pre">blank=True</span></tt>，表单验证时将允许输入空值。</span><span class="yiyi-st" id="yiyi-24">如果字段设置<tt class="docutils literal"><span class="pre">blank=False</span></tt>，则该字段为必填。</span></p>
</div>
<div class="section" id="s-choices">
<span id="s-field-choices"></span><span id="choices"></span><span id="field-choices"></span><h3><span class="yiyi-st" id="yiyi-579">choices</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#choices" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.choices">
<tt class="descclassname">Field.</tt><tt class="descname">choices</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.choices" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-25">它是一个可迭代的结构(比如，列表或是元组)，由可迭代的二元组组成(比如<tt class="docutils literal"><span class="pre">[(A,</span> <span class="pre">B),</span> <span class="pre">(A,</span> <span class="pre">B)</span> <span class="pre">...]</span></tt>)，用来给这个字段提供选择项。</span><span class="yiyi-st" id="yiyi-26">如果设置了 choices ，默认表格样式就会显示选择框，而不是标准的文本框，而且这个选择框的选项就是 choices 中的元组。</span></p>
<p><span class="yiyi-st" id="yiyi-27">每个元组中的第一个元素，是存储在数据库中的值；第二个元素是该选项更易理解的描述。 </span><span class="yiyi-st" id="yiyi-28">比如:</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">YEAR_IN_SCHOOL_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s">'FR'</span><span class="p">,</span> <span class="s">'Freshman'</span><span class="p">),</span>
    <span class="p">(</span><span class="s">'SO'</span><span class="p">,</span> <span class="s">'Sophomore'</span><span class="p">),</span>
    <span class="p">(</span><span class="s">'JR'</span><span class="p">,</span> <span class="s">'Junior'</span><span class="p">),</span>
    <span class="p">(</span><span class="s">'SR'</span><span class="p">,</span> <span class="s">'Senior'</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-29">一般来说，最好在模型类内部定义choices，然后再给每个值定义一个合适名字的常量。</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">FRESHMAN</span> <span class="o">=</span> <span class="s">'FR'</span>
    <span class="n">SOPHOMORE</span> <span class="o">=</span> <span class="s">'SO'</span>
    <span class="n">JUNIOR</span> <span class="o">=</span> <span class="s">'JR'</span>
    <span class="n">SENIOR</span> <span class="o">=</span> <span class="s">'SR'</span>
    <span class="n">YEAR_IN_SCHOOL_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">(</span><span class="n">FRESHMAN</span><span class="p">,</span> <span class="s">'Freshman'</span><span class="p">),</span>
        <span class="p">(</span><span class="n">SOPHOMORE</span><span class="p">,</span> <span class="s">'Sophomore'</span><span class="p">),</span>
        <span class="p">(</span><span class="n">JUNIOR</span><span class="p">,</span> <span class="s">'Junior'</span><span class="p">),</span>
        <span class="p">(</span><span class="n">SENIOR</span><span class="p">,</span> <span class="s">'Senior'</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">year_in_school</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                      <span class="n">choices</span><span class="o">=</span><span class="n">YEAR_IN_SCHOOL_CHOICES</span><span class="p">,</span>
                                      <span class="n">default</span><span class="o">=</span><span class="n">FRESHMAN</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_upperclass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">year_in_school</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">JUNIOR</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">SENIOR</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-30">尽管你可以在模型类的外部定义choices然后引用它，但是在模型类中定义choices和其每个choice的name(即元组的第二个元素)可以保存所有使用choices的类的信息， 也使得choices更容易被应用（例如， <tt class="docutils literal"><span class="pre">Student.SOPHOMORE</span></tt> 可以在任何引入<tt class="docutils literal"><span class="pre">Student</span></tt> 模型的位置生效)。</span></p>
<p><span class="yiyi-st" id="yiyi-31">你也可以归类可选的choices到已命名的组中用来达成组织整理的目的:</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">MEDIA_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s">'Audio'</span><span class="p">,</span> <span class="p">(</span>
            <span class="p">(</span><span class="s">'vinyl'</span><span class="p">,</span> <span class="s">'Vinyl'</span><span class="p">),</span>
            <span class="p">(</span><span class="s">'cd'</span><span class="p">,</span> <span class="s">'CD'</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="p">(</span><span class="s">'Video'</span><span class="p">,</span> <span class="p">(</span>
            <span class="p">(</span><span class="s">'vhs'</span><span class="p">,</span> <span class="s">'VHS Tape'</span><span class="p">),</span>
            <span class="p">(</span><span class="s">'dvd'</span><span class="p">,</span> <span class="s">'DVD'</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="p">(</span><span class="s">'unknown'</span><span class="p">,</span> <span class="s">'Unknown'</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-32">每个元组的第一个元素是组的名字。</span><span class="yiyi-st" id="yiyi-33">第二个元素是一组可迭代的二元元组，每一个二元元组包含一个值和一个给人看的名字构成一个选项。</span><span class="yiyi-st" id="yiyi-34">分组的选项可能会和未分组的选项合在同一个list中。 （就像例中的<cite>unknown</cite>选项）。</span></p>
<p><span class="yiyi-st" id="yiyi-35">对于有<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.choices" title="django.db.models.Field.choices"><tt class="xref py py-attr docutils literal"><span class="pre">choices</span></tt></a> set的模型字段, Django 将会加入一个方法来获取当前字段值的易于理解的名称(即元组的第二个值)</span><span class="yiyi-st" id="yiyi-36">参见数据库API文档中的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/instances.html#django.db.models.Model.get_FOO_display" title="django.db.models.Model.get_FOO_display"><tt class="xref py py-meth docutils literal"><span class="pre">get_FOO_display()</span></tt></a>。</span></p>
<p><span class="yiyi-st" id="yiyi-37">请注意choices可以是任何可迭代的对象 – 不是必须是列表或者元组。</span><span class="yiyi-st" id="yiyi-38">这一点使你可以动态的构建choices。</span><span class="yiyi-st" id="yiyi-39">但是如果你发现你自己搞不定动态的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.choices" title="django.db.models.Field.choices"><tt class="xref py py-attr docutils literal"><span class="pre">choices</span></tt></a>，你最好还是使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>来构建一个合适的数据库表。</span><span class="yiyi-st" id="yiyi-40">如果有数据变动的话，<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.choices" title="django.db.models.Field.choices"><tt class="xref py py-attr docutils literal"><span class="pre">choices</span></tt></a>意味着那些变动不多的静态数据。</span></p>
<div class="versionadded">
<span class="title"><span class="yiyi-st" id="yiyi-731">新的Django 1.7。</span></span> </div>
<p><span class="yiyi-st" id="yiyi-41">除非<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.blank" title="django.db.models.Field.blank"><tt class="xref py py-attr docutils literal"><span class="pre">blank=False</span></tt></a> 和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.default" title="django.db.models.Field.default"><tt class="xref py py-attr docutils literal"><span class="pre">default</span></tt></a>一起在字段中被设置，否则，可选择菜单将会有<tt class="docutils literal"><span class="pre">"---------"</span></tt> 的标签。</span><span class="yiyi-st" id="yiyi-729">要重写这个行为, 需要加入一个包含<tt class="docutils literal"><span class="pre">None</span></tt>的元组到 <tt class="docutils literal"><span class="pre">choices</span></tt>里面; 例如 <tt class="docutils literal"><span class="pre">(None,</span> <span class="pre">'Your</span> <span class="pre">String</span> <span class="pre">For</span> <span class="pre">Display')</span></tt>. </span><span class="yiyi-st" id="yiyi-730">或者, 你可以在操作有意义的地方用一个空字符串代替<tt class="docutils literal"><span class="pre">None</span></tt> &nbsp;- 比如在一个 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>.</span></p>
</div>
<div class="section" id="s-db-column">
<span id="db-column"></span><h3><span class="yiyi-st" id="yiyi-580">db_column</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#db-column" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.db_column">
<tt class="descclassname">Field.</tt><tt class="descname">db_column</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.db_column" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-42">数据库中用来表示该字段的名称。</span><span class="yiyi-st" id="yiyi-43">如果未指定，那么Django将会使用Field名作为字段名.</span></p>
<p><span class="yiyi-st" id="yiyi-44">如果你的数据库列名为SQL语句的保留字，或者是包含不能作为Python 变量名的字符，如连字符，没问题。</span><span class="yiyi-st" id="yiyi-45">Django 会在后台给列名和表名加上双引号。</span></p>
</div>
<div class="section" id="s-db-index">
<span id="db-index"></span><h3><span class="yiyi-st" id="yiyi-581">db_index</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#db-index" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.db_index">
<tt class="descclassname">Field.</tt><tt class="descname">db_index</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.db_index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-46">若值为 <tt class="docutils literal"><span class="pre">True</span></tt>, 则 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/django-admin.html#django-admin-sqlindexes"><tt class="xref std std-djadmin docutils literal"><span class="pre">django-admin</span> <span class="pre">sqlindexes</span></tt></a> 将会为此字段输出 <tt class="docutils literal"><span class="pre">CREATE</span> <span class="pre">INDEX</span></tt> 语句。（译注：为此字段创建索引）</span></p>
</div>
<div class="section" id="s-db-tablespace">
<span id="db-tablespace"></span><h3><span class="yiyi-st" id="yiyi-582">db_tablespace</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#db-tablespace" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.db_tablespace">
<tt class="descclassname">Field.</tt><tt class="descname">db_tablespace</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.db_tablespace" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-47">如果该字段有索引的话，数据库<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/tablespaces.html"><em>表空间</em></a>的名称将作为该字段的索引名。</span><span class="yiyi-st" id="yiyi-48">如果<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/settings.html#std:setting-DEFAULT_INDEX_TABLESPACE"><tt class="xref std std-setting docutils literal"><span class="pre">DEFAULT_INDEX_TABLESPACE</span></tt></a> 已经设置，则默认值是由DEFAULT_INDEX_TABLESPACE指定, 如果没有设置则由
<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/options.html#django.db.models.Options.db_tablespace" title="django.db.models.Options.db_tablespace"><tt class="xref py py-attr docutils literal"><span class="pre">db_tablespace</span></tt></a> 指定，</span><span class="yiyi-st" id="yiyi-49">如果后台数据库不支持表空间，或者索引，则该选项被忽略</span></p>
</div>
<div class="section" id="s-default">
<span id="default"></span><h3><span class="yiyi-st" id="yiyi-583">默认</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#default" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.default">
<tt class="descclassname">Field.</tt><tt class="descname">default</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.default" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-50">该字段的默认值. </span><span class="yiyi-st" id="yiyi-51">它可以是一个值或者一个可调用对象. </span><span class="yiyi-st" id="yiyi-52">如果是一个可调用对象，那么在每一次创建新对象的时候，它将会调用一次.</span></p>
<p><span class="yiyi-st" id="yiyi-53">这个默认值不可以是一个可变对象（如字典，列表，等等）,因为对于所有模型的一个新的实例来说，它们指向同一个引用。</span><span class="yiyi-st" id="yiyi-54">或者，把他们包装为一个可调用的对象。</span><span class="yiyi-st" id="yiyi-55">例如，你有一个自定义的<tt class="docutils literal"><span class="pre">JSONField</span></tt>，并且想指定一个特定的字典值，可以如下使用：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">contact_default</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">"email"</span><span class="p">:</span> <span class="s">"to1@example.com"</span><span class="p">}</span>

<span class="n">contact_info</span> <span class="o">=</span> <span class="n">JSONField</span><span class="p">(</span><span class="s">"ContactInfo"</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">contact_default</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-56">请注意<tt class="docutils literal"><span class="pre">lambda</span></tt>s 函数不可作为如 <tt class="docutils literal"><span class="pre">default</span></tt> 这类可选参数的值.因为它们无法被 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/migrations.html#migration-serializing"><em>migrations命令序列化</em></a>. </span><span class="yiyi-st" id="yiyi-57">请参见文档其他部分。</span></p>
<p><span class="yiyi-st" id="yiyi-58">默认值会在新实例创建并且没有给该字段提供值时使用。</span><span class="yiyi-st" id="yiyi-59">如果字段为主键，默认值也会在设置为<tt class="docutils literal"><span class="pre">None</span></tt>时使用。</span></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.8:</span> <p><span class="yiyi-st" id="yiyi-60">之前的版本不会使用<tt class="docutils literal"><span class="pre">None</span></tt>作为主键&nbsp;</span></p>
</div>
</div>
<div class="section" id="s-editable">
<span id="editable"></span><h3><span class="yiyi-st" id="yiyi-584">可编辑</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#editable" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.editable">
<tt class="descclassname">Field.</tt><tt class="descname">editable</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.editable" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-61">如果设为<tt class="docutils literal"><span class="pre">False</span></tt>, 这个字段将不会出现在 admin 或者其他 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a>. </span><span class="yiyi-st" id="yiyi-62">他们也会跳过 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/instances.html#validating-objects"><em>模型验证</em></a>. </span><span class="yiyi-st" id="yiyi-63">默认是<tt class="docutils literal"><span class="pre">True</span></tt>.</span></p>
</div>
<div class="section" id="s-error-messages">
<span id="error-messages"></span><h3><span class="yiyi-st" id="yiyi-585">error_messages</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#error-messages" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.error_messages">
<tt class="descclassname">Field.</tt><tt class="descname">error_messages</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.error_messages" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-64"><tt class="docutils literal"><span class="pre">error_messages</span></tt> 参数能够让你重写默认抛出的错误信息。</span><span class="yiyi-st" id="yiyi-65">通过指定 key 来确认你要重写的错误信息。</span></p>
<p><span class="yiyi-st" id="yiyi-66">error_messages 的 key 值包括 <tt class="docutils literal"><span class="pre">null</span></tt>, <tt class="docutils literal"><span class="pre">blank</span></tt>, <tt class="docutils literal"><span class="pre">invalid</span></tt>, <tt class="docutils literal"><span class="pre">invalid_choice</span></tt>, <tt class="docutils literal"><span class="pre">unique</span></tt>, 和 <tt class="docutils literal"><span class="pre">unique_for_date</span></tt>. </span><span class="yiyi-st" id="yiyi-67">其余的 error_messages 的 keys 在不同的章节下 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-types">Field types</a>是不一样的。</span></p>
<div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><span class="yiyi-st" id="yiyi-68">这个 <tt class="docutils literal"><span class="pre">unique_for_date</span></tt> 的 error_messages 的key 是在 1.7 中加的。</span></p>
</div>
<div class="section" id="s-help-text">
<span id="help-text"></span><h3><span class="yiyi-st" id="yiyi-586">help_text</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#help-text" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.help_text">
<tt class="descclassname">Field.</tt><tt class="descname">help_text</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.help_text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-69">额外的 ‘help' 文本将被显示在表单控件form中。</span><span class="yiyi-st" id="yiyi-70" style="">即便你的字段没有应用到一个form里面，这样的操作对文档化也很有帮助。</span></p>
<p><span class="yiyi-st" id="yiyi-71">注意这 <em>不</em> 会自动添加 HTML 标签。</span><span class="yiyi-st" id="yiyi-72">需要你在 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.help_text" title="django.db.models.Field.help_text"><tt class="xref py py-attr docutils literal"><span class="pre">help_text</span></tt></a> 包含自己需要的格式。</span><span class="yiyi-st" id="yiyi-73">例如:</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">help_text</span><span class="o">=</span><span class="s">"Please use the following format: &lt;em&gt;YYYY-MM-DD&lt;/em&gt;."</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-74">另外, 你可以使用简单文本和<tt class="docutils literal"><span class="pre">django.utils.html.escape()</span></tt>以避免任何HTML特定的字符.</span><span class="yiyi-st" id="yiyi-75">请确保你所使用的help text能够避免那些由不受信任的用户进行的跨站点脚本攻击。</span></p>
</div>
<div class="section" id="s-primary-key">
<span id="primary-key"></span><h3><span class="yiyi-st" id="yiyi-587">primary_key（主键）</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#primary-key" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.primary_key">
<tt class="descclassname">Field.</tt><tt class="descname">primary_key</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.primary_key" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-76">若为 <tt class="docutils literal"><span class="pre">True</span></tt>, 则该字段会成为模型的主键字段。</span></p>
<p><span class="yiyi-st" id="yiyi-77">如果你没有在模型的任何字段上指定 <tt class="docutils literal"><span class="pre">primary_key=True</span></tt>, Django会自动添加一个 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.AutoField" title="django.db.models.AutoField"><tt class="xref py py-class docutils literal"><span class="pre">AutoField</span></tt></a> 字段来充当主键。 所以除非你想要覆盖默认的主键行为，否则不需要在任何字段上设定<tt class="docutils literal"><span class="pre">primary_key=True</span></tt> 。</span><span class="yiyi-st" id="yiyi-78">更多内容 请参考 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/models.html#automatic-primary-key-fields"><em>Automatic primary key fields</em></a>.</span></p>
<p><span class="yiyi-st" id="yiyi-79"><tt class="docutils literal"><span class="pre">primary_key=True</span></tt> 暗含着<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null=False</span></tt></a> 和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><tt class="xref py py-attr docutils literal"><span class="pre">unique=True</span></tt></a>. </span><span class="yiyi-st" id="yiyi-80">一个对象上只能拥有一个主键.</span></p>
<p><span class="yiyi-st" id="yiyi-81">主键字段是只读的。</span><span class="yiyi-st" id="yiyi-82">如果你改变了一个已存在对象上的主键并且保存的话，会创建一个新的对象，而不是覆盖旧的.</span></p>
</div>
<div class="section" id="s-unique">
<span id="unique"></span><h3><span class="yiyi-st" id="yiyi-588">unique</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#unique" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.unique">
<tt class="descclassname">Field.</tt><tt class="descname">unique</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-83">如果为&nbsp;<tt class="docutils literal"><span class="pre">True</span></tt>, 这个字段在表中必须有唯一值.</span></p>
<p><span class="yiyi-st" id="yiyi-84">这是一个在数据库级别的强制性动作,并且通过模型来验证。</span><span class="yiyi-st" id="yiyi-85" style="">如果你试图用一个重复的值来保存<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><tt class="xref py py-attr docutils literal"><span class="pre">unique</span></tt></a> 字段，那么一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/exceptions.html#django.db.IntegrityError" title="django.db.IntegrityError"><tt class="xref py py-exc docutils literal"><span class="pre">django.db.IntegrityError</span></tt></a>就会通过模型的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/instances.html#django.db.models.Model.save" title="django.db.models.Model.save"><tt class="xref py py-meth docutils literal"><span class="pre">save()</span></tt></a> 函数抛出来。</span></p>
<p><span class="yiyi-st" id="yiyi-86"> 除了<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a>、<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.OneToOneField" title="django.db.models.OneToOneField"><tt class="xref py py-class docutils literal"><span class="pre">OneToOneField</span></tt></a>和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a> 以外的其他字段类型都可以使用这个设置。</span></p>
<p><span class="yiyi-st" id="yiyi-87">注意当设置<tt class="docutils literal"><span class="pre">unique</span></tt> 为<tt class="docutils literal"><span class="pre">True</span></tt> 时，你不需要再指定 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><tt class="xref py py-attr docutils literal"><span class="pre">db_index</span></tt></a>，因为<tt class="docutils literal"><span class="pre">unique</span></tt> 本身就意味着一个索引的创建。</span></p>
</div>
<div class="section" id="s-unique-for-date">
<span id="unique-for-date"></span><h3><span class="yiyi-st" id="yiyi-589">unique_for_date</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#unique-for-date" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.unique_for_date">
<tt class="descclassname">Field.</tt><tt class="descname">unique_for_date</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique_for_date" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-88">当设置它为<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DateField" title="django.db.models.DateField"><tt class="xref py py-class docutils literal"><span class="pre">DateField</span></tt></a> 和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><tt class="xref py py-class docutils literal"><span class="pre">DateTimeField</span></tt></a> 字段的名称时，表示要求该字段对于相应的日期字段值是唯一的。</span></p>
<p><span class="yiyi-st" id="yiyi-89">例如，你有一个<tt class="docutils literal"><span class="pre">title</span></tt> 字段设置<tt class="docutils literal"><span class="pre">unique_for_date="pub_date"</span></tt>，那么Django 将不允许两个记录具有相同的<tt class="docutils literal"><span class="pre">title</span></tt> 和<tt class="docutils literal"><span class="pre">pub_date</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-90">注意，如果你将它设置为<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DateTimeField" title="django.db.models.DateTimeField"><tt class="xref py py-class docutils literal"><span class="pre">DateTimeField</span></tt></a>，只会考虑其日期部分。</span><span class="yiyi-st" id="yiyi-91">此外，如果<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/settings.html#std:setting-USE_TZ"><tt class="xref std std-setting docutils literal"><span class="pre">USE_TZ</span></tt></a> 为<tt class="docutils literal"><span class="pre">True</span></tt>，检查将以对象保存时的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/i18n/timezones.html#default-current-time-zone"><em>当前的时区</em></a> 进行。</span></p>
<p><span class="yiyi-st" id="yiyi-92">这是在模型验证期间通过<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/instances.html#django.db.models.Model.validate_unique" title="django.db.models.Model.validate_unique"><tt class="xref py py-meth docutils literal"><span class="pre">Model.validate_unique()</span></tt></a> 强制执行的，而不是在数据库层级进行验证。</span><span class="yiyi-st" id="yiyi-93">如果<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><tt class="xref py py-attr docutils literal"><span class="pre">unique_for_date</span></tt></a> 约束涉及的字段不是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a>中的字段（例如，<tt class="docutils literal"><span class="pre">exclude</span></tt>中列出的字段或者设置了<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.editable" title="django.db.models.Field.editable"><tt class="xref py py-attr docutils literal"><span class="pre">editable=False</span></tt></a>），<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/instances.html#django.db.models.Model.validate_unique" title="django.db.models.Model.validate_unique"><tt class="xref py py-meth docutils literal"><span class="pre">Model.validate_unique()</span></tt></a> 将忽略该特殊的约束。</span></p>
</div>
<div class="section" id="s-unique-for-month">
<span id="unique-for-month"></span><h3><span class="yiyi-st" id="yiyi-590">unique_for_month</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#unique-for-month" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.unique_for_month">
<tt class="descclassname">Field.</tt><tt class="descname">unique_for_month</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique_for_month" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-94">类似<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><tt class="xref py py-attr docutils literal"><span class="pre">unique_for_date</span></tt></a>，只是要求字段对于月份是唯一的。</span></p>
</div>
<div class="section" id="s-unique-for-year">
<span id="unique-for-year"></span><h3><span class="yiyi-st" id="yiyi-591">unique_for_year</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#unique-for-year" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.unique_for_year">
<tt class="descclassname">Field.</tt><tt class="descname">unique_for_year</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique_for_year" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-95">类似<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique_for_date" title="django.db.models.Field.unique_for_date"><tt class="xref py py-attr docutils literal"><span class="pre">unique_for_date</span></tt></a> 和 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique_for_month" title="django.db.models.Field.unique_for_month"><tt class="xref py py-attr docutils literal"><span class="pre">unique_for_month</span></tt></a>。</span></p>
</div>
<div class="section" id="s-verbose-name">
<span id="verbose-name"></span><h3><span class="yiyi-st" id="yiyi-592">verbose_name</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#verbose-name" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.verbose_name">
<tt class="descclassname">Field.</tt><tt class="descname">verbose_name</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.verbose_name" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-96">一个字段的可读性更高的名称。</span><span class="yiyi-st" id="yiyi-97">如果用户没有设定冗余名称字段，Django会自动将该字段属性名中的下划线转换为空格，并用它来创建冗余名称。</span><span class="yiyi-st" id="yiyi-98">可以参照 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/models.html#verbose-field-names"><em>Verbose field names</em></a>.</span></p>
</div>
<div class="section" id="s-validators">
<span id="validators"></span><h3><span class="yiyi-st" id="yiyi-593">验证器</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#validators" title="Permalink to this headline">¶</a></h3>
<dl class="attribute">
<dt id="django.db.models.Field.validators">
<tt class="descclassname">Field.</tt><tt class="descname">validators</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.validators" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-99">该字段将要运行的一个Validator 的列表。</span><span class="yiyi-st" id="yiyi-100">更多信息参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/validators.html"><em>Validators 的文档</em></a>。</span></p>
<div class="section" id="s-registering-and-fetching-lookups">
<span id="registering-and-fetching-lookups"></span><h4><span class="yiyi-st" id="yiyi-630">注册和获取查询</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#registering-and-fetching-lookups" title="Permalink to this headline">¶</a></h4>
<p><span class="yiyi-st" id="yiyi-101"><tt class="docutils literal"><span class="pre">Field</span></tt> 实现了<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/lookups.html#lookup-registration-api"><em>查询注册API</em></a>。</span><span class="yiyi-st" id="yiyi-102">该API 可以用于自定义一个字段类型的可用的查询，以及如何从一个字段获取查询。</span></p>
</div>
</div>
</div>
<div class="section" id="s-field-types">
<span id="s-model-field-types"></span><span id="field-types"></span><span id="model-field-types"></span><h2><span class="yiyi-st" id="yiyi-572">makemigrations</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-types" title="Permalink to this headline">¶</a></h2>
<div class="section" id="s-autofield">
<span id="autofield"></span><h3><span class="yiyi-st" id="yiyi-594">AutoField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#autofield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.AutoField">
<em class="property">class </em><tt class="descname">AutoField</tt>(<em>**options</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.AutoField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-103">一个根据实际ID自动增长的<a title="django.db.models.IntegerField" class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.IntegerField"><tt class="xref py py-class docutils literal"><span class="pre">IntegerField</span></tt></a> . </span><span class="yiyi-st" id="yiyi-104">你通常不需要直接使用;</span><span class="yiyi-st" id="yiyi-105">如果不指定,一个主键字段将自动添加到你创建的模型中.</span><span class="yiyi-st" id="yiyi-106">详细查看&nbsp;<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/models.html#automatic-primary-key-fields"><em>主键字段</em></a>.</span></p>
</div>
<div class="section" id="s-bigintegerfield">
<span id="bigintegerfield"></span><h3><span class="yiyi-st" id="yiyi-595">BigIntegerField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#bigintegerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.BigIntegerField">
<em class="property">class </em><tt class="descname">BigIntegerField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.BigIntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-107">一个64位整数, 类似于一个&nbsp;<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.IntegerField" title="django.db.models.IntegerField"><tt class="xref py py-class docutils literal"><span class="pre">IntegerField</span></tt></a> ,它的值的范围是&nbsp;<tt class="docutils literal"><span class="pre">-9223372036854775808</span></tt> 到<tt class="docutils literal"><span class="pre">9223372036854775807</span></tt>之间. </span><span class="yiyi-st" id="yiyi-108">这个字段默认的表单组件是一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</span></p>
</div>
<div class="section" id="s-binaryfield">
<span id="binaryfield"></span><h3><span class="yiyi-st" id="yiyi-596">BinaryField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#binaryfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.BinaryField">
<em class="property">class </em><tt class="descname">BinaryField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.BinaryField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-109">这是一个用来存储原始二进制码的Field.
</span><span class="yiyi-st" id="yiyi-110">只支持<tt class="docutils literal"><span class="pre">bytes</span></tt> 赋值，</span><span class="yiyi-st" id="yiyi-111">注意这个Field只有很有限的功能。</span><span class="yiyi-st" id="yiyi-112">例如，不大可能在一个<tt class="docutils literal"><span class="pre">BinaryField</span></tt> 值的数据上进行查询</span></p>
<div class="admonition-abusing-binaryfield admonition">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-113">滥用<tt class="docutils literal"><span class="pre">BinaryField</span></tt></span></p>
<p class="last"><span class="yiyi-st" id="yiyi-114">尽管你可能想使用数据库来存储你的文件，但是99%的情况下这都是不好的设计。</span><span class="yiyi-st" id="yiyi-115">这个字段 <em>不是</em>替代<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/static-files/index.html"><em>static files</em></a> 的合理操作.</span></p>
</div>
</div>
<div class="section" id="s-booleanfield">
<span id="booleanfield"></span><h3><span class="yiyi-st" id="yiyi-597">BooleanField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#booleanfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.BooleanField">
<em class="property">class </em><tt class="descname">BooleanField</tt>(<em>**options</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.BooleanField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-116">true/false 字段。</span></p>
<p><span class="yiyi-st" id="yiyi-117">此字段的默认表单挂件是一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.CheckboxInput" title="django.forms.CheckboxInput"><tt class="xref py py-class docutils literal"><span class="pre">CheckboxInput</span></tt></a>.</span></p>
<p><span class="yiyi-st" id="yiyi-118">如果你需要设置<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> 值，则使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.NullBooleanField" title="django.db.models.NullBooleanField"><tt class="xref py py-class docutils literal"><span class="pre">NullBooleanField</span></tt></a> 来代替BooleanField。</span></p>
<p><span class="yiyi-st" id="yiyi-119">如果<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.default" title="django.db.models.Field.default"><tt class="xref py py-attr docutils literal"><span class="pre">Field.default</span></tt></a>没有指定的话， <tt class="docutils literal"><span class="pre">BooleanField</span></tt> 的默认值是 <tt class="docutils literal"><span class="pre">None</span></tt>。</span></p>
</div>
<div class="section" id="s-charfield">
<span id="charfield"></span><h3><span class="yiyi-st" id="yiyi-598">CharField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#charfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.CharField">
<em class="property">class </em><tt class="descname">CharField</tt>(<em>max_length=None</em><span class="optional">[</span>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-120">一个用来存储从小到很大各种长度的字符串的地方</span></p>
<p><span class="yiyi-st" id="yiyi-121">如果是巨大的文本类型, 可以用 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.TextField" title="django.db.models.TextField"><tt class="xref py py-class docutils literal"><span class="pre">TextField</span></tt></a>.</span></p>
<p><span class="yiyi-st" id="yiyi-122">这个字段默认的表单样式是 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</span></p>
<p><span class="yiyi-st" id="yiyi-123"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>必须接收一个额外的参数:</span></p>
<dl class="attribute">
<dt id="django.db.models.CharField.max_length">
<tt class="descclassname">CharField.</tt><tt class="descname">max_length</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField.max_length" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-124">字段的最大字符长度.</span><span class="yiyi-st" id="yiyi-125">max_length将在数据库层和Django表单验证中起作用, 用来限定字段的长度.&nbsp;</span></p>
</dd></dl>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-126">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-127">如果你在写一个需要导出到多个不同数据库后端的应用，你需要注意某些后端对<tt class="docutils literal"><span class="pre">max_length</span></tt>有一些限制，</span><span class="yiyi-st" id="yiyi-128">查看<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/databases.html"><em>数据库后端注意事项</em></a>来获取更多的细节</span></p>
</div>
<div class="admonition-mysql-users admonition">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-129">MySQL的使用者们:</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-130">如果你在使用该字段的同时使用MySQLdb 1.2.2以及 <tt class="docutils literal"><span class="pre">utf8_bin</span></tt> 校对 其一般<em>不是</em> 默认情况), 你必须了解一些问题. </span><span class="yiyi-st" id="yiyi-131">详细请参考 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/databases.html#mysql-collation"><em>MySQL database notes</em></a> .</span></p>
</div>
</div>
<div class="section" id="s-commaseparatedintegerfield">
<span id="commaseparatedintegerfield"></span><h3><span class="yiyi-st" id="yiyi-599">CommaSeparatedIntegerField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#commaseparatedintegerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.CommaSeparatedIntegerField">
<em class="property">class </em><tt class="descname">CommaSeparatedIntegerField</tt>(<em>max_length=None</em><span class="optional">[</span>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CommaSeparatedIntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-132">一个逗号分隔的整数字段。</span><span class="yiyi-st" id="yiyi-133">像 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>一样， 需要一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> 参数， 同时数据库移植时也需要注意。</span></p>
</div>
<div class="section" id="s-datefield">
<span id="datefield"></span><h3><span class="yiyi-st" id="yiyi-600">DateField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#datefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.DateField">
<em class="property">class </em><tt class="descname">DateField</tt>(<span class="optional">[</span><em>auto_now=False</em>, <em>auto_now_add=False</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DateField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-134">这是一个使用Python的<tt class="docutils literal"><span class="pre">datetime.date</span></tt>实例表示的日期. </span><span class="yiyi-st" id="yiyi-135">有几个额外的设置参数:</span></p>
<dl class="attribute">
<dt id="django.db.models.DateField.auto_now">
<tt class="descclassname">DateField.</tt><tt class="descname">auto_now</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DateField.auto_now" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-136">每次保存对象时，自动设置该字段为当前时间。</span><span class="yiyi-st" id="yiyi-137">用于"最后一次修改"的时间戳。</span><span class="yiyi-st" id="yiyi-138">注意，它<em>总是</em>使用当前日期；</span><span class="yiyi-st" id="yiyi-139">它不只是一个默认值，你可以覆盖。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.DateField.auto_now_add">
<tt class="descclassname">DateField.</tt><tt class="descname">auto_now_add</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DateField.auto_now_add" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-140">当对象第一次被创建时自动设置当前时间。</span><span class="yiyi-st" id="yiyi-141">用于创建时间的时间戳. </span><span class="yiyi-st" id="yiyi-142">它<em>总是</em>使用当前日期；</span><span class="yiyi-st" id="yiyi-143">和你可以覆盖的那种默认值不一样。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-144">该字段默认对应的表单控件是一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>. </span><span class="yiyi-st" id="yiyi-145">在管理员站点添加了一个JavaScript写的日历控件，和一个“Today"的快捷按钮.</span><span class="yiyi-st" id="yiyi-146">包含了一个额外的<tt class="docutils literal"><span class="pre">invalid_date</span></tt>错误消息键.</span></p>
<p><span class="yiyi-st" id="yiyi-147"><tt class="docutils literal"><span class="pre">auto_now_add</span></tt>, <tt class="docutils literal"><span class="pre">auto_now</span></tt>, and <tt class="docutils literal"><span class="pre">default</span></tt> 这些设置是相互排斥的. </span><span class="yiyi-st" id="yiyi-148">他们之间的任何组合将会发生错误的结果.</span></p>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-149">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-150"> 在目前的实现中，设置<tt class="docutils literal"><span class="pre">auto_now</span></tt>或者<tt class="docutils literal"><span class="pre">auto_now_add</span></tt>为<tt class="docutils literal"><span class="pre">True</span></tt>将为让这个字段同时得到<tt class="docutils literal"><span class="pre">editable=False</span></tt>和<tt class="docutils literal"><span class="pre">blank=True</span></tt>这两个设置.</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-151">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-152"> <tt class="docutils literal"><span class="pre">auto_now</span></tt> and <tt class="docutils literal"><span class="pre">auto_now_add</span></tt>这两个设置会在对象创建或更新的时刻,总是使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/i18n/timezones.html#default-current-time-zone"><em>default timezone</em></a>(默认时区)的日期. </span><span class="yiyi-st" id="yiyi-153">如果你不想这样，你可以考虑一下简单地使用你自己的默认调用或者重写<tt class="docutils literal"><span class="pre">save()</span></tt>(在save()函数里自己添加保存时间的机制.译者注)而不是使用<tt class="docutils literal"><span class="pre">auto_now</span></tt> 或者 <tt class="docutils literal"><span class="pre">auto_now_add</span></tt>;</span><span class="yiyi-st" id="yiyi-154">也可以使用<tt class="docutils literal"><span class="pre">DateTimeField</span></tt>字段类来替换<tt class="docutils literal"><span class="pre">DateField</span></tt> 并且在给用户呈现时间的时候,决定如何处理从datetime到date的转换.</span></p>
</div>
</div>
<div class="section" id="s-datetimefield">
<span id="datetimefield"></span><h3><span class="yiyi-st" id="yiyi-601">DateTimeField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#datetimefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.DateTimeField">
<em class="property">class </em><tt class="descname">DateTimeField</tt>(<span class="optional">[</span><em>auto_now=False</em>, <em>auto_now_add=False</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DateTimeField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-155">它是通过Python <tt class="docutils literal"><span class="pre">datetime.datetime</span></tt>实例表示的日期和时间. </span><span class="yiyi-st" id="yiyi-156">携带了跟<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DateField" title="django.db.models.DateField"><tt class="xref py py-class docutils literal"><span class="pre">DateField</span></tt></a>一样的额外参数.</span></p>
<p><span class="yiyi-st" id="yiyi-157"> 该字段默认对应的表单控件是一个单个的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>(单文本输入框). </span><span class="yiyi-st" id="yiyi-158">管理界面是使用两个带有 JavaScript控件的&nbsp;<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>&nbsp;文本框.</span></p>
</div>
<div class="section" id="s-decimalfield">
<span id="decimalfield"></span><h3><span class="yiyi-st" id="yiyi-602">DecimalField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#decimalfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.DecimalField">
<em class="property">class </em><tt class="descname">DecimalField</tt>(<em>max_digits=None</em>, <em>decimal_places=None</em><span class="optional">[</span>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DecimalField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-159">用python中 <a class="reference external" href="https://docs.python.org/3/library/decimal.html#decimal.Decimal" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">Decimal</span></tt></a> 的一个实例来表示十进制浮点数. </span><span class="yiyi-st" id="yiyi-160">有两个 <strong>必须的</strong>参数:</span></p>
<dl class="attribute">
<dt id="django.db.models.DecimalField.max_digits">
<tt class="descclassname">DecimalField.</tt><tt class="descname">max_digits</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DecimalField.max_digits" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-161">位数总数，包括小数点后的位数。</span><span class="yiyi-st" id="yiyi-162">该值必须大于等于<tt class="docutils literal"><span class="pre">decimal_places</span></tt>.</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.DecimalField.decimal_places">
<tt class="descclassname">DecimalField.</tt><tt class="descname">decimal_places</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DecimalField.decimal_places" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-163">小数点后的数字数量</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-164">例如,要保存最大为 <tt class="docutils literal"><span class="pre">999</span></tt> 并有两位小数的数字,你应该使用:</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">max_digits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-165">而要存储那些将近10亿，并且要求达到小数点后十位精度的数字:</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">models</span><span class="o">.</span><span class="n">DecimalField</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">max_digits</span><span class="o">=</span><span class="mi">19</span><span class="p">,</span> <span class="n">decimal_places</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-166">该字段默认的窗体组件是 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</span></p>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-167">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-168">想获取更多关于 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FloatField" title="django.db.models.FloatField"><tt class="xref py py-class docutils literal"><span class="pre">FloatField</span></tt></a> 和 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DecimalField" title="django.db.models.DecimalField"><tt class="xref py py-class docutils literal"><span class="pre">DecimalField</span></tt></a> 差异, 请参照 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#floatfield-vs-decimalfield"><em>FloatField vs. DecimalField</em></a>.</span></p>
</div>
</div>
<div class="section" id="s-durationfield">
<span id="durationfield"></span><h3><span class="yiyi-st" id="yiyi-603">DurationField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#durationfield" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<dl class="class">
<dt id="django.db.models.DurationField">
<em class="property">class </em><tt class="descname">DurationField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DurationField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-169">用作存储一段时间的字段类型 - 类似Python中的<a class="reference external" href="https://docs.python.org/3/library/datetime.html#datetime.timedelta" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">timedelta</span></tt></a>. </span><span class="yiyi-st" id="yiyi-170">当数据库使用的是PostgreSQL, 该数据类型使用的是一个 <tt class="docutils literal"><span class="pre">interval</span></tt> 而在Oracle上，则使用的是 <tt class="docutils literal"><span class="pre">INTERVAL</span> <span class="pre">DAY(9)</span> <span class="pre">TO</span> <span class="pre">SECOND(6)</span></tt>. </span><span class="yiyi-st" id="yiyi-171">否则使用微秒的<tt class="docutils literal"><span class="pre">bigint</span></tt>。</span></p>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-172">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-173"><tt class="docutils literal"><span class="pre">DurationField</span></tt> 的算数运算在多数情况下可以很好的工作。&nbsp;</span><span class="yiyi-st" id="yiyi-174">然而，在除了PostgreSQL之外的其他数据库中, 将 <tt class="docutils literal"><span class="pre">DurationField</span></tt> 与 <tt class="docutils literal"><span class="pre">DateTimeField</span></tt> 的实例比较则不会得到正确的结果。</span></p>
</div>
</div>
<div class="section" id="s-emailfield">
<span id="emailfield"></span><h3><span class="yiyi-st" id="yiyi-604">EmailField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#emailfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.EmailField">
<em class="property">class </em><tt class="descname">EmailField</tt>(<span class="optional">[</span><em>max_length=254</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.EmailField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-175">一个 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> 用来检查输入的email地址是否合法。</span><span class="yiyi-st" id="yiyi-176">它使用 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/validators.html#django.core.validators.EmailValidator" title="django.core.validators.EmailValidator"><tt class="xref py py-class docutils literal"><span class="pre">EmailValidator</span></tt></a> 来验证输入合法性。</span></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.8:</span> <p><span class="yiyi-st" id="yiyi-177">默认最大长度 <tt class="docutils literal"><span class="pre">max_length</span></tt> 从75增加到254以符合RFC3696/5321标准。</span></p>
</div>
</div>
<div class="section" id="s-filefield">
<span id="filefield"></span><h3><span class="yiyi-st" id="yiyi-605">FileField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#filefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.FileField">
<em class="property">class </em><tt class="descname">FileField</tt>(<span class="optional">[</span><em>upload_to=None</em>, <em>max_length=100</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-178">一个上传文件的字段。</span></p>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-179">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-180">FileField字段不支持<tt class="docutils literal"><span class="pre">primary_key</span></tt> 和<tt class="docutils literal"><span class="pre">unique</span></tt>参数，如果使用会生成&nbsp;<tt class="docutils literal"><span class="pre">TypeError</span></tt>错误</span></p>
</div>
<p><span class="yiyi-st" id="yiyi-181">有两个可选参数：</span></p>
<dl class="attribute">
<dt id="django.db.models.FileField.upload_to">
<tt class="descclassname">FileField.</tt><tt class="descname">upload_to</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField.upload_to" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p><span class="yiyi-st" id="yiyi-182">在旧版本Django中，<tt class="docutils literal"><span class="pre">upload_to</span></tt>&nbsp;属性是必须要有的;</span></p>
</div>
<p><span class="yiyi-st" id="yiyi-183">一个本地文件系统的路径，它将附加到<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/settings.html#std:setting-MEDIA_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_ROOT</span></tt></a> 设置的后面来确定<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.fields.files.FieldFile.url" title="django.db.models.fields.files.FieldFile.url"><tt class="xref py py-attr docutils literal"><span class="pre">url</span></tt></a> 属性的值。</span></p>
<p><span class="yiyi-st" id="yiyi-184">这个路径可能会包含一个 <a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.4)"><tt class="xref py py-func docutils literal"><span class="pre">strftime()</span></tt></a> 格式串,并且会在文件上传时被替换为 实际的date/time作为文件路径 (这样上传的文件就不会塞满你指定的文件夹了).</span></p>
<p><span class="yiyi-st" id="yiyi-185">它还可以是一个可调用对象如函数，将调用它来获取上传路径，包括文件名。</span><span class="yiyi-st" id="yiyi-186">这个可调用对象必须接受两个参数，并且返回一个Unix 风格的路径（带有前向/）给存储系统。</span><span class="yiyi-st" id="yiyi-187">将传递的两个参数为：</span></p>
<table class="docutils">
<colgroup>
<col width="32%">
<col width="68%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">instance</span></tt></td>
<td><p class="first"><span class="yiyi-st" id="yiyi-188"><tt class="docutils literal"><span class="pre">FileField</span></tt> 定义所在的模型的实例。</span><span class="yiyi-st" id="yiyi-189">更准确地说，就是当前文件的所在的那个实例。</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-190">大部分情况下，这个实例将还没有保存到数据库中，若它用到默认的<tt class="docutils literal"><span class="pre">AutoField</span></tt> 字段，<em>它的主键字段还可能没有值</em>。</span></p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">filename</span></tt></td>
<td>The filename that was originally given to the
file. This may or may not be taken into account
when determining the final destination path.</td>
</tr>
</tbody>
</table>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.FileField.storage">
<tt class="descclassname">FileField.</tt><tt class="descname">storage</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField.storage" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-191">一个Storage 对象，用于你的文件的存取。</span><span class="yiyi-st" id="yiyi-192">参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/files.html"><em>管理文件</em></a> 获取如何提供这个对象的细节。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-193">这个字段的默认表单Widget 是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.ClearableFileInput" title="django.forms.ClearableFileInput"><tt class="xref py py-class docutils literal"><span class="pre">ClearableFileInput</span></tt></a>。</span></p>
<p><span class="yiyi-st" id="yiyi-194">在模型中调用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a> 或 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> (见下方) 需如下几步：</span></p>
<ol class="arabic simple">
<li><span class="yiyi-st" id="yiyi-636">在你的settings文件中, 你必须要定义 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/settings.html#std:setting-MEDIA_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_ROOT</span></tt></a> 作为Django存储上传文件的路径</span><span class="yiyi-st" id="yiyi-637">(从性能上考虑，这些文件不能存在数据库中。) </span><span class="yiyi-st" id="yiyi-638">定义一个 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/settings.html#std:setting-MEDIA_URL"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_URL</span></tt></a> 作为基础的URL或者目录。</span><span class="yiyi-st" id="yiyi-639">确保这个目录可以被web server使用的账户写入。</span></li>
<li><span class="yiyi-st" id="yiyi-640"> 在模型中添加<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a> 或 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> 字段, 定义 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><tt class="xref py py-attr docutils literal"><span class="pre">upload_to</span></tt></a>参数，内容是  <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/settings.html#std:setting-MEDIA_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_ROOT</span></tt></a> 的子目录，用来存放上传的文件。</span></li>
<li><span class="yiyi-st" id="yiyi-641">数据库中存放的仅是这个文件的路径 （相对于<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/settings.html#std:setting-MEDIA_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_ROOT</span></tt></a>). </span><span class="yiyi-st" id="yiyi-642">你很可能会想用由Django提供的便利的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.fields.files.FieldFile.url" title="django.db.models.fields.files.FieldFile.url"><tt class="xref py py-attr docutils literal"><span class="pre">url</span></tt></a> 属性。</span><span class="yiyi-st" id="yiyi-643">比如说, 如果你的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> 命名为 <tt class="docutils literal"><span class="pre">mug_shot</span></tt>, 你可以在template中用 <tt class="docutils literal"><span class="pre">{{</span> <span class="pre">object.mug_shot.url</span> <span class="pre">}}</span></tt>获得你照片的绝对路径。</span></li>
</ol>
<p><span class="yiyi-st" id="yiyi-195">例如，如果你的 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/settings.html#std:setting-MEDIA_ROOT"><tt class="xref std std-setting docutils literal"><span class="pre">MEDIA_ROOT</span></tt></a>设定为 <tt class="docutils literal"><span class="pre">'/home/media'</span></tt>，并且 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><tt class="xref py py-attr docutils literal"><span class="pre">upload_to</span></tt></a>设定为 <tt class="docutils literal"><span class="pre">'photos/%Y/%m/%d'</span></tt>。 </span><span class="yiyi-st" id="yiyi-196"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField.upload_to" title="django.db.models.FileField.upload_to"><tt class="xref py py-attr docutils literal"><span class="pre">upload_to</span></tt></a>的<tt class="docutils literal"><span class="pre">'%Y/%m/%d'</span></tt>被<a class="reference external" href="https://docs.python.org/3/library/time.html#time.strftime" title="(in Python v3.4)"><tt class="xref py py-func docutils literal"><span class="pre">strftime()</span></tt></a>所格式化；</span><span class="yiyi-st" id="yiyi-197"><tt class="docutils literal"><span class="pre">'%Y'</span></tt> 将会被格式化为一个四位数的年份, <tt class="docutils literal"><span class="pre">'%m'</span></tt> 被格式化为一个两位数的月份<tt class="docutils literal"><span class="pre">'%d'</span></tt>是两位数日份。</span><span class="yiyi-st" id="yiyi-198">如果你在Jan.15.2007上传了一个文件，它将被保存在<tt class="docutils literal"><span class="pre">/home/media/photos/2007/01/15</span></tt>目录下.</span></p>
<p><span class="yiyi-st" id="yiyi-199">如果你想获得上传文件的存盘文件名，或者是文件大小，你可以分别使用 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/files/file.html#django.core.files.File.name" title="django.core.files.File.name"><tt class="xref py py-attr docutils literal"><span class="pre">name</span></tt></a> 和 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/files/file.html#django.core.files.File.size" title="django.core.files.File.size"><tt class="xref py py-attr docutils literal"><span class="pre">size</span></tt></a> 属性； </span><span class="yiyi-st" id="yiyi-200">更多可用属性及方法信息，请参见 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/files/file.html#django.core.files.File" title="django.core.files.File"><tt class="xref py py-class docutils literal"><span class="pre">File</span></tt></a> 类索引 和 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/files.html"><em>Managing files</em></a> 主题指导.</span></p>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-201">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-202">保存的文件作为模型存储在数据库中的一部分，所以在磁盘上使用的实际的文件名在模型保存完毕之前是不可靠的。</span></p>
</div>
<p><span class="yiyi-st" id="yiyi-203">上传的文件对应的URL可以通过使用 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.fields.files.FieldFile.url" title="django.db.models.fields.files.FieldFile.url"><tt class="xref py py-attr docutils literal"><span class="pre">url</span></tt></a> 属性获得. </span><span class="yiyi-st" id="yiyi-204">在内部，它会调用 &nbsp;<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/files/storage.html#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><tt class="xref py py-class docutils literal"><span class="pre">Storage</span></tt></a> 类下的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/files/storage.html#django.core.files.storage.Storage.url" title="django.core.files.storage.Storage.url"><tt class="xref py py-meth docutils literal"><span class="pre">url()</span></tt></a>方法.</span></p>
<p id="file-upload-security"><span class="yiyi-st" id="yiyi-205">值得注意的是，无论你在任何时候处理上传文件的需求，你都应该密切关注你的文件将被上传到哪里，上传的文件类型，以避免安全漏洞。</span><span class="yiyi-st" id="yiyi-206"><em>认证所有上传文件</em> 以确保那些上传的文件是你所认为的文件。</span><span class="yiyi-st" id="yiyi-207">例如，如果你盲目的允许其他人在无需认证的情况下上传文件至你的web服务器的root目录中，那么别人可以上传一个CGI或者PHP脚本然后通过访问一个你网站的URL来执行这个脚本。</span><span class="yiyi-st" id="yiyi-208">所以，不要允许这种事情发生。</span></p>
<p><span class="yiyi-st" id="yiyi-209">甚至是上传HTML文件也值得注意，它可以通过浏览器（虽然不是服务器）执行，也可以引发相当于是XSS或者CSRF攻击的安全威胁。</span></p>
<p><span class="yiyi-st" id="yiyi-210"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a> 实例将会在你的数据库中创建一个默认最大长度为100字符的<tt class="docutils literal"><span class="pre">varchar</span></tt> 列。</span><span class="yiyi-st" id="yiyi-211">就像其他的fields一样, 你可以用 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> 参数改变最大长度的值.</span></p>
<div class="section" id="s-filefield-and-fieldfile">
<span id="filefield-and-fieldfile"></span><h4><span class="yiyi-st" id="yiyi-631">FileField 和FieldFile</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#filefield-and-fieldfile" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="django.db.models.fields.files.FieldFile">
<em class="property">class </em><tt class="descname">FieldFile</tt><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/_modules/django/db/models/fields/files.html#FieldFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.fields.files.FieldFile" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-212">当你添加 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a> 到你的模型中时, 你实际上会获得一个 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.fields.files.FieldFile" title="django.db.models.fields.files.FieldFile"><tt class="xref py py-class docutils literal"><span class="pre">FieldFile</span></tt></a>的实例来替代将要访问的文件。 </span><span class="yiyi-st" id="yiyi-213">除了继承至 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/files/file.html#django.core.files.File" title="django.core.files.File"><tt class="xref py py-class docutils literal"><span class="pre">django.core.files.File</span></tt></a>的功能外, 这个类还有其他属性和方法可以用于访问文件:</span></p>
<dl class="attribute">
<dt id="django.db.models.fields.files.FieldFile.url">
<tt class="descclassname">FieldFile.</tt><tt class="descname">url</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.fields.files.FieldFile.url" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-214">通过潜在<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/files/storage.html#django.core.files.storage.Storage" title="django.core.files.storage.Storage"><tt class="xref py py-class docutils literal"><span class="pre">Storage</span></tt></a> 类的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/files/storage.html#django.core.files.storage.Storage.url" title="django.core.files.storage.Storage.url"><tt class="xref py py-meth docutils literal"><span class="pre">url()</span></tt></a>方法可以只读地访问文件的URL。</span></p>
<dl class="method">
<dt id="django.db.models.fields.files.FieldFile.open">
<tt class="descclassname">FieldFile.</tt><tt class="descname">open</tt>(<em>mode='rb'</em>)<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/_modules/django/db/models/fields/files.html#FieldFile.open"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.fields.files.FieldFile.open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-215">该方法像标准的Python <tt class="docutils literal"><span class="pre">open()</span></tt> 方法,并可通过&nbsp;<tt class="docutils literal"><span class="pre">mode</span></tt>参数设置打开模式.</span></p>
<dl class="method">
<dt id="django.db.models.fields.files.FieldFile.close">
<tt class="descclassname">FieldFile.</tt><tt class="descname">close</tt>()<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/_modules/django/db/models/fields/files.html#FieldFile.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.fields.files.FieldFile.close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-216">该方法像标准的Python<tt class="docutils literal"><span class="pre">file.close()</span></tt> 方法,并关闭相关文件.</span></p>
<dl class="method">
<dt id="django.db.models.fields.files.FieldFile.save">
<tt class="descclassname">FieldFile.</tt><tt class="descname">save</tt>(<em>name</em>, <em>content</em>, <em>save=True</em>)<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/_modules/django/db/models/fields/files.html#FieldFile.save"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.fields.files.FieldFile.save" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-217">这个方法会将文件名以及文件内容传递到字段的storage类中,并将模型字段与保存好的文件关联. </span><span class="yiyi-st" id="yiyi-218">如果想要手动关联文件数据到你的模型中的 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a>实例, 则<tt class="docutils literal"><span class="pre">save()</span></tt> 方法总是用来保存该数据.</span></p>
<p><span class="yiyi-st" id="yiyi-219">方法接受两个必选参数: <tt class="docutils literal"><span class="pre">name</span></tt> 文件名, 和 <tt class="docutils literal"><span class="pre">content</span></tt> 文件内容.</span><span class="yiyi-st" id="yiyi-220">可选参数<tt class="docutils literal"><span class="pre">save</span></tt> 控制模型实例在关联的文件被修改时是否保存.</span><span class="yiyi-st" id="yiyi-221">默认为 <tt class="docutils literal"><span class="pre">True</span></tt>.</span></p>
<p><span class="yiyi-st" id="yiyi-222">注意参数 <tt class="docutils literal"><span class="pre">content</span></tt> 应该是 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/files/file.html#django.core.files.File" title="django.core.files.File"><tt class="xref py py-class docutils literal"><span class="pre">django.core.files.File</span></tt></a>的一个实例, 而不是Python内建的File对象.</span><span class="yiyi-st" id="yiyi-223">你可以用如下方法从一个已经存在的Python文件对象来构建 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/files/file.html#django.core.files.File" title="django.core.files.File"><tt class="xref py py-class docutils literal"><span class="pre">File</span></tt></a> :</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core.files</span> <span class="kn">import</span> <span class="n">File</span>
<span class="c"># Open an existing file using Python's built-in open()</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">'/tmp/hello.world'</span><span class="p">)</span>
<span class="n">myfile</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-224">或者，你可以像下面的一样从一个python字符串中构建</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.core.files.base</span> <span class="kn">import</span> <span class="n">ContentFile</span>
<span class="n">myfile</span> <span class="o">=</span> <span class="n">ContentFile</span><span class="p">(</span><span class="s">"hello world"</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-225">更多信息, 请参见 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/files.html"><em>Managing files</em></a>.</span></p>
<dl class="method">
<dt id="django.db.models.fields.files.FieldFile.delete">
<tt class="descclassname">FieldFile.</tt><tt class="descname">delete</tt>(<em>save=True</em>)<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/_modules/django/db/models/fields/files.html#FieldFile.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.fields.files.FieldFile.delete" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-226">删除与此实例关联的文件，并清除该字段的所有属性。</span><span class="yiyi-st" id="yiyi-227">注意︰ 如果它碰巧是开放的调用 <tt class="docutils literal"><span class="pre">delete()</span></tt> 方法 时，此方法将关闭该文件。</span></p>
<p><span class="yiyi-st" id="yiyi-228">模型实例<tt class="docutils literal"><span class="pre">save</span></tt>的文件与此字段关联的可选 保存 参数控件已被删除。</span><span class="yiyi-st" id="yiyi-229">默认值为 <tt class="docutils literal"><span class="pre">True</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-230">注意，model删除的时候，与之关联的文件并不会被删除。</span><span class="yiyi-st" id="yiyi-231">如果你要把文件也清理掉，你需要自己处理。</span></p>
</div>
</div>
<div class="section" id="s-filepathfield">
<span id="filepathfield"></span><h3><span class="yiyi-st" id="yiyi-606">FilePathField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#filepathfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.FilePathField">
<em class="property">class </em><tt class="descname">FilePathField</tt>(<em>path=None</em><span class="optional">[</span>, <em>match=None</em>, <em>recursive=False</em>, <em>max_length=100</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-232">一个&nbsp;<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> ，内容只限于文件系统内特定目录下的文件名。</span><span class="yiyi-st" id="yiyi-233">有三个参数, 其中第一个是 <strong>必需的</strong>:</span></p>
<dl class="attribute">
<dt id="django.db.models.FilePathField.path">
<tt class="descclassname">FilePathField.</tt><tt class="descname">path</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField.path" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-234">必填。</span><span class="yiyi-st" id="yiyi-732">这个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField" title="django.db.models.FilePathField"><tt class="xref py py-class docutils literal"><span class="pre">FilePathField</span></tt></a> 应该得到其选择的目录的绝对文件系统路径。</span><span class="yiyi-st" id="yiyi-733">例如: <tt class="docutils literal"><span class="pre">"/home/images"</span></tt>.</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.FilePathField.match">
<tt class="descclassname">FilePathField.</tt><tt class="descname">match</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField.match" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-235">可选的.</span><span class="yiyi-st" id="yiyi-734"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField" title="django.db.models.FilePathField"><tt class="xref py py-class docutils literal"><span class="pre">FilePathField</span></tt></a> 将会作为一个正则表达式来匹配文件名。</span><span class="yiyi-st" id="yiyi-735">但请注意正则表达式将将被作用于基本文件名，而不是完整路径。</span><span class="yiyi-st" id="yiyi-736">例如: <tt class="docutils literal"><span class="pre">"foo.*.txt$"</span></tt>, 将会匹配到一个名叫 <tt class="docutils literal"><span class="pre">foo23.txt</span></tt> 的文件，但不匹配到 <tt class="docutils literal"><span class="pre">bar.txt</span></tt> 或者 <tt class="docutils literal"><span class="pre">foo23.png</span></tt>.</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.FilePathField.recursive">
<tt class="descclassname">FilePathField.</tt><tt class="descname">recursive</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField.recursive" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-236">可选的.</span><span class="yiyi-st" id="yiyi-237"><tt class="docutils literal"><span class="pre">True</span></tt> 或 <tt class="docutils literal"><span class="pre">False</span></tt>.</span><span class="yiyi-st" id="yiyi-238">默认是<tt class="docutils literal"><span class="pre">False</span></tt>.</span><span class="yiyi-st" id="yiyi-239">声明是否包含所有子目录的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField.path" title="django.db.models.FilePathField.path"><tt class="xref py py-attr docutils literal"><span class="pre">路径</span></tt></a></span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.FilePathField.allow_files">
<tt class="descclassname">FilePathField.</tt><tt class="descname">allow_files</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField.allow_files" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-240">可选的.</span><span class="yiyi-st" id="yiyi-241"><tt class="docutils literal"><span class="pre">True</span></tt> 或 <tt class="docutils literal"><span class="pre">False</span></tt>.</span><span class="yiyi-st" id="yiyi-242">默认是<tt class="docutils literal"><span class="pre">True</span></tt>.</span><span class="yiyi-st" id="yiyi-243">声明是否包含指定位置的文件。</span><span class="yiyi-st" id="yiyi-244">该参数或<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField.allow_folders" title="django.db.models.FilePathField.allow_folders"><tt class="xref py py-attr docutils literal"><span class="pre">allow_folders</span></tt></a> 中必须有一个为 <tt class="docutils literal"><span class="pre">True</span></tt>.</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.FilePathField.allow_folders">
<tt class="descclassname">FilePathField.</tt><tt class="descname">allow_folders</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField.allow_folders" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-245">是可选的.</span><span class="yiyi-st" id="yiyi-246">输入 <tt class="docutils literal"><span class="pre">True</span></tt> 或者 <tt class="docutils literal"><span class="pre">False</span></tt>.</span><span class="yiyi-st" id="yiyi-247">默认值为  <tt class="docutils literal"><span class="pre">False</span></tt>.</span><span class="yiyi-st" id="yiyi-248">声明是否包含指定位置的文件夹。</span><span class="yiyi-st" id="yiyi-249">该参数或 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField.allow_files" title="django.db.models.FilePathField.allow_files"><tt class="xref py py-attr docutils literal"><span class="pre">allow_files</span></tt></a> 中必须有一个为 <tt class="docutils literal"><span class="pre">True</span></tt>.</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-250">当然，这些参数可以同时使用。</span></p>
<p><span class="yiyi-st" id="yiyi-251">有一点需要提醒的是 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField.match" title="django.db.models.FilePathField.match"><tt class="xref py py-attr docutils literal"><span class="pre">match</span></tt></a>只匹配基本文件名（base filename）, 而不是整个文件路径（full path）. </span><span class="yiyi-st" id="yiyi-252">例如:</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">FilePathField</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s">"/home/images"</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="s">"foo.*"</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-253">...将匹配<tt class="docutils literal"><span class="pre">/home/images/foo.png</span></tt>而不是<tt class="docutils literal"><span class="pre">/home/images/foo/bar.png</span></tt> 因为只允许<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField.match" title="django.db.models.FilePathField.match"><tt class="xref py py-attr docutils literal"><span class="pre">匹配</span></tt></a> 基本文件名(<tt class="docutils literal"><span class="pre">foo.png</span></tt> 和 <tt class="docutils literal"><span class="pre">bar.png</span></tt>).</span></p>
<p><span class="yiyi-st" id="yiyi-254"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FilePathField" title="django.db.models.FilePathField"><tt class="xref py py-class docutils literal"><span class="pre">FilePathField</span></tt></a>实例被创建在您的数据库为<tt class="docutils literal"><span class="pre">varchar</span></tt>列默认最大长度为 100 个字符。</span><span class="yiyi-st" id="yiyi-255">作为与其他字段，您可以更改使用的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a>最大长度。</span></p>
</div>
<div class="section" id="s-floatfield">
<span id="floatfield"></span><h3><span class="yiyi-st" id="yiyi-607">FloatField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#floatfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.FloatField">
<em class="property">class </em><tt class="descname">FloatField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FloatField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-256">用Python的一个<tt class="docutils literal"><span class="pre">float</span></tt> 实例来表示一个浮点数.</span></p>
<p><span class="yiyi-st" id="yiyi-257">该字段的默认组件是一个 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</span></p>
<div class="admonition-floatfield-vs-decimalfield admonition" id="floatfield-vs-decimalfield">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-258"><tt class="docutils literal"><span class="pre">FloatField</span></tt> 与<tt class="docutils literal"><span class="pre">DecimalField</span></tt></span></p>
<p class="last"><span class="yiyi-st" id="yiyi-259">有时候<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FloatField" title="django.db.models.FloatField"><tt class="xref py py-class docutils literal"><span class="pre">FloatField</span></tt></a> 类会和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DecimalField" title="django.db.models.DecimalField"><tt class="xref py py-class docutils literal"><span class="pre">DecimalField</span></tt></a> 类发生混淆. </span><span class="yiyi-st" id="yiyi-260">虽然它们表示都表示实数，但是二者表示数字的方式不一样。</span><span class="yiyi-st" id="yiyi-261"><tt class="docutils literal"><span class="pre">FloatField</span></tt> 使用的是Python内部的 <tt class="docutils literal"><span class="pre">float</span></tt> 类型, 而<tt class="docutils literal"><span class="pre">DecimalField</span></tt> 使用的是Python的 <tt class="docutils literal"><span class="pre">Decimal</span></tt> 类型. </span><span class="yiyi-st" id="yiyi-262">想要了解更多二者的差别, 可以查看Python文档中的 <a class="reference external" href="https://docs.python.org/3/library/decimal.html#module-decimal" title="(in Python v3.4)"><tt class="xref py py-mod docutils literal"><span class="pre">decimal</span></tt></a> 模块.</span></p>
</div>
</div>
<div class="section" id="s-imagefield">
<span id="imagefield"></span><h3><span class="yiyi-st" id="yiyi-608">ImageField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#imagefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.ImageField">
<em class="property">class </em><tt class="descname">ImageField</tt>(<span class="optional">[</span><em>upload_to=None</em>, <em>height_field=None</em>, <em>width_field=None</em>, <em>max_length=100</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ImageField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-263">继承了 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a>的所有属性和方法, 但还对上传的对象进行校验，确保它是个有效的image.</span></p>
<p><span class="yiyi-st" id="yiyi-264">除了从<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.FileField" title="django.db.models.FileField"><tt class="xref py py-class docutils literal"><span class="pre">FileField</span></tt></a>继承来的属性外，<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> 还有<tt class="docutils literal"><span class="pre">宽</span></tt>和 <tt class="docutils literal"><span class="pre">高</span></tt>属性。</span></p>
<p><span class="yiyi-st" id="yiyi-265">为了更便捷的去用那些属性值, <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a> 有两个额外的可选参数</span></p>
<dl class="attribute">
<dt id="django.db.models.ImageField.height_field">
<tt class="descclassname">ImageField.</tt><tt class="descname">height_field</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ImageField.height_field" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-266">该属性的设定会在模型实例保存时,自动填充图片的高度.</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ImageField.width_field">
<tt class="descclassname">ImageField.</tt><tt class="descname">width_field</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ImageField.width_field" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-267">该属性的设定会在模型实例保存时,自动填充图片的宽度.</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-268">ImageField字段需要调用<a class="reference external" href="http://pillow.readthedocs.org/en/latest/">Pillow</a> 库.</span></p>
<p><span class="yiyi-st" id="yiyi-269"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ImageField" title="django.db.models.ImageField"><tt class="xref py py-class docutils literal"><span class="pre">ImageField</span></tt></a>会创建在你的数据库中 和 <tt class="docutils literal"><span class="pre">varchar</span></tt> 一样,默认最大长度为100</span><span class="yiyi-st" id="yiyi-270">和其他字段一样, 你可以使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a> 参数来设置默认文件最大值.</span></p>
<p><span class="yiyi-st" id="yiyi-271">此字段的默认表单工具是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.ClearableFileInput" title="django.forms.ClearableFileInput"><tt class="xref py py-class docutils literal"><span class="pre">ClearableFileInput</span></tt></a>.</span></p>
</div>
<div class="section" id="s-integerfield">
<span id="integerfield"></span><h3><span class="yiyi-st" id="yiyi-609">IntegerField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#integerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.IntegerField">
<em class="property">class </em><tt class="descname">IntegerField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.IntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-272">一个整数。</span><span class="yiyi-st" id="yiyi-273">在Django所支持的所有数据库中，从 <tt class="docutils literal"><span class="pre">-2147483648</span></tt> 到 <tt class="docutils literal"><span class="pre">2147483647</span></tt> 范围内的值是合法的。</span><span class="yiyi-st" id="yiyi-274">默认的表单输入工具是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</span></p>
</div>
<div class="section" id="s-ipaddressfield">
<span id="ipaddressfield"></span><h3><span class="yiyi-st" id="yiyi-610">IPAddressField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#ipaddressfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.IPAddressField">
<em class="property">class </em><tt class="descname">IPAddressField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.IPAddressField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<div class="deprecated">
<p><span class="yiyi-st" id="yiyi-275"><span class="versionmodified">自1.7版起已弃用：</span></span><span class="yiyi-st" id="yiyi-276">该字段已废弃，从1.7开始支持<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.GenericIPAddressField" title="django.db.models.GenericIPAddressField"><tt class="xref py py-class docutils literal"><span class="pre">GenericIPAddressField</span></tt></a>.</span></p>
</div>
<p><span class="yiyi-st" id="yiyi-277">IP地址，会自动格式化（例如：“192.0.2.30”）。</span><span class="yiyi-st" id="yiyi-278">默认表单控件为 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</span></p>
</div>
<div class="section" id="s-genericipaddressfield">
<span id="genericipaddressfield"></span><h3><span class="yiyi-st" id="yiyi-611">GenericIPAddressField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#genericipaddressfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.GenericIPAddressField">
<em class="property">class </em><tt class="descname">GenericIPAddressField</tt>(<span class="optional">[</span><em>protocol=both</em>, <em>unpack_ipv4=False</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.GenericIPAddressField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-279">一个 IPv4 或 IPv6 地址, 字符串格式 (例如 <tt class="docutils literal"><span class="pre">192.0.2.30</span></tt> 或 <tt class="docutils literal"><span class="pre">2a02:42fe::4</span></tt>). </span><span class="yiyi-st" id="yiyi-280">这个字段的默认表单小部件是一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.</span></p>
<p><span class="yiyi-st" id="yiyi-281">IPv6地址规范化遵循<span class="target" id="index-0"></span> <a class="rfc reference external" href="http://tools.ietf.org/html/rfc4291.html#section-2.2"><strong>RFC 4291</strong></a>部分2.2，包括使用该部分第3段中建议的IPv4格式，如<tt class="docutils literal"><span class="pre">::ffff:192.0.2.0</span></tt></span><span class="yiyi-st" id="yiyi-282">例如，<tt class="docutils literal"><span class="pre">2001:0::0:01</span></tt>将被归一化为<tt class="docutils literal"><span class="pre">2001::1</span></tt>和<tt class="docutils literal"><span class="pre">::ffff:0a0a:0a0a</span></tt> <tt class="docutils literal"><span class="pre">::ffff:10.10.10.10</span></tt>。</span><span class="yiyi-st" id="yiyi-283">所有字符都转换为小写。</span></p>
<dl class="attribute">
<dt id="django.db.models.GenericIPAddressField.protocol">
<tt class="descclassname">GenericIPAddressField.</tt><tt class="descname">protocol</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.GenericIPAddressField.protocol" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-284">限制指定协议的有效输入。</span><span class="yiyi-st" id="yiyi-285">接受的值为<tt class="docutils literal"><span class="pre">'both'</span></tt>（默认值），<tt class="docutils literal"><span class="pre">'IPv4'</span></tt>或<tt class="docutils literal"><span class="pre">'IPv6'</span></tt>。</span><span class="yiyi-st" id="yiyi-286">匹配不区分大小写。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.GenericIPAddressField.unpack_ipv4">
<tt class="descclassname">GenericIPAddressField.</tt><tt class="descname">unpack_ipv4</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.GenericIPAddressField.unpack_ipv4" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-287">解析IPv4映射地址如 <tt class="docutils literal"><span class="pre">::ffff:192.0.2.1</span></tt>.</span><span class="yiyi-st" id="yiyi-288">如果启用该选项，则地址将被解析到<tt class="docutils literal"><span class="pre">192.0.2.1</span></tt>.</span><span class="yiyi-st" id="yiyi-289">默认为禁用。</span><span class="yiyi-st" id="yiyi-290">只有当<tt class="docutils literal"><span class="pre">协议</span></tt> 设置为<tt class="docutils literal"><span class="pre">'both'</span></tt>时才可以使用。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-291">如果允许空白值，则必须允许null值，因为空白值存储为null。</span></p>
</div>
<div class="section" id="s-nullbooleanfield">
<span id="nullbooleanfield"></span><h3><span class="yiyi-st" id="yiyi-612">NullBooleanField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#nullbooleanfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.NullBooleanField">
<em class="property">class </em><tt class="descname">NullBooleanField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.NullBooleanField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-292">类似<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.BooleanField" title="django.db.models.BooleanField"><tt class="xref py py-class docutils literal"><span class="pre">BooleanField</span></tt></a>, 但是允许 <tt class="docutils literal"><span class="pre">NULL</span></tt> 作为一个选项.</span><span class="yiyi-st" id="yiyi-293">使用此代替<tt class="docutils literal"><span class="pre">null=True</span></tt>的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.BooleanField" title="django.db.models.BooleanField"><tt class="xref py py-class docutils literal"><span class="pre">BooleanField</span></tt></a>。</span><span class="yiyi-st" id="yiyi-294">此字段的默认表单widget为<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.NullBooleanSelect" title="django.forms.NullBooleanSelect"><tt class="xref py py-class docutils literal"><span class="pre">NullBooleanSelect</span></tt></a>。</span></p>
</div>
<div class="section" id="s-positiveintegerfield">
<span id="positiveintegerfield"></span><h3><span class="yiyi-st" id="yiyi-613">PositiveIntegerField（正整数字段）</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#positiveintegerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.PositiveIntegerField">
<em class="property">class </em><tt class="descname">PositiveIntegerField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.PositiveIntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-295">类似 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.IntegerField" title="django.db.models.IntegerField"><tt class="xref py py-class docutils literal"><span class="pre">IntegerField</span></tt></a>, 但值必须是正数或者零(<tt class="docutils literal"><span class="pre">0</span></tt>). </span><span class="yiyi-st" id="yiyi-296">从<tt class="docutils literal"><span class="pre">0</span></tt>到<tt class="docutils literal"><span class="pre">2147483647</span></tt>的值在Django支持的所有数据库中都是安全的。</span><span class="yiyi-st" id="yiyi-297">由于向后兼容性原因，接受值<tt class="docutils literal"><span class="pre">0</span></tt>。</span></p>
</div>
<div class="section" id="s-positivesmallintegerfield">
<span id="positivesmallintegerfield"></span><h3><span class="yiyi-st" id="yiyi-614">PositiveSmallIntegerField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#positivesmallintegerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.PositiveSmallIntegerField">
<em class="property">class </em><tt class="descname">PositiveSmallIntegerField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.PositiveSmallIntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-298">该模型字段类似 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.PositiveIntegerField" title="django.db.models.PositiveIntegerField"><tt class="xref py py-class docutils literal"><span class="pre">PositiveIntegerField</span></tt></a>, 但是只允许小于某一特定值（依据数据库类型而定）。</span><span class="yiyi-st" id="yiyi-299">从<tt class="docutils literal"><span class="pre">0</span></tt> 到 <tt class="docutils literal"><span class="pre">32767</span></tt> 这个区间，对于Django所支持的所有数据库而言都是安全的。</span></p>
</div>
<div class="section" id="s-slugfield">
<span id="slugfield"></span><h3><span class="yiyi-st" id="yiyi-615">SlugField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#slugfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.SlugField">
<em class="property">class </em><tt class="descname">SlugField</tt>(<span class="optional">[</span><em>max_length=50</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.SlugField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-300"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/glossary.html#term-slug"><em class="xref std std-term">Slug</em></a> 是一个新闻术语（通常叫做短标题）。</span><span class="yiyi-st" id="yiyi-301">一个slug只能包含字母、数字、下划线或者是连字符，通常用来作为短标签。</span><span class="yiyi-st" id="yiyi-302">通常它们是用来放在URL里的。</span></p>
<p><span class="yiyi-st" id="yiyi-303">像CharField一样，你可以指定<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a>（也请参阅该部分中的有关数据库可移植性的说明和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a>）。</span><span class="yiyi-st" id="yiyi-304">如果没有指定 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a>, Django将会默认长度为50。</span></p>
<p><span class="yiyi-st" id="yiyi-305">将<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><tt class="xref py py-attr docutils literal"><span class="pre">Field.db_index</span></tt></a>设置为<tt class="docutils literal"><span class="pre">True</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-306">根据某些其他值的值自动预填充SlugField通常很有用。</span><span class="yiyi-st" id="yiyi-307">你可以在admin中使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.prepopulated_fields" title="django.contrib.admin.ModelAdmin.prepopulated_fields"><tt class="xref py py-attr docutils literal"><span class="pre">prepopulated_fields</span></tt></a>自动执行此操作。</span></p>
</div>
<div class="section" id="s-smallintegerfield">
<span id="smallintegerfield"></span><h3><span class="yiyi-st" id="yiyi-616">SmallIntegerField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#smallintegerfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.SmallIntegerField">
<em class="property">class </em><tt class="descname">SmallIntegerField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.SmallIntegerField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-308">Like an IntegerField, but only allows values under a certain (database-dependent) point.  <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.IntegerField" title="django.db.models.IntegerField"><tt class="xref py py-class docutils literal"><span class="pre"></span></tt></a></span><span class="yiyi-st" id="yiyi-309">对于django来讲，该字段值在 <tt class="docutils literal"><span class="pre">-32768</span></tt> 至 <tt class="docutils literal"><span class="pre">32767</span></tt>这个范围内对所有可支持的数据库都是安全的。</span></p>
</div>
<div class="section" id="s-textfield">
<span id="textfield"></span><h3><span class="yiyi-st" id="yiyi-617">TextField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#textfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.TextField">
<em class="property">class </em><tt class="descname">TextField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.TextField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-310">大文本字段。</span><span class="yiyi-st" id="yiyi-311">该模型默认的表单组件是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.Textarea" title="django.forms.Textarea"><tt class="xref py py-class docutils literal"><span class="pre">Textarea</span></tt></a>。</span></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p><span class="yiyi-st" id="yiyi-312">如果你在这个字段类型中使用了<tt class="docutils literal"><span class="pre">max_length</span></tt>属性，它将会在渲染页面表单元素<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.Textarea" title="django.forms.Textarea"><tt class="xref py py-class docutils literal"><span class="pre">Textarea</span></tt></a> 时候体现出来。</span><span class="yiyi-st" id="yiyi-313">但是并不会在model或者数据库级别强制性的限定字段长度。</span><span class="yiyi-st" id="yiyi-314">请使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>。</span></p>
</div>
<div class="admonition-mysql-users admonition">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-315">MySQL 用户</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-316">如果你将此字段用于MySQLdb 1.2.1p2和<tt class="docutils literal"><span class="pre">utf8_bin</span></tt>排序规则（这<em>不是</em>默认值），则需要注意一些问题。</span><span class="yiyi-st" id="yiyi-317">有关详细信息，请参阅<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/databases.html#mysql-collation"><em>MySQL数据库注释</em></a>。</span></p>
</div>
</div>
<div class="section" id="s-timefield">
<span id="timefield"></span><h3><span class="yiyi-st" id="yiyi-618">TimeField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#timefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.TimeField">
<em class="property">class </em><tt class="descname">TimeField</tt>(<span class="optional">[</span><em>auto_now=False</em>, <em>auto_now_add=False</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.TimeField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-318">时间字段，和Python中 <tt class="docutils literal"><span class="pre">datetime.time</span></tt> 一样。</span><span class="yiyi-st" id="yiyi-319">接受与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DateField" title="django.db.models.DateField"><tt class="xref py py-class docutils literal"><span class="pre">DateField</span></tt></a>相同的自动填充选项。</span></p>
<p><span class="yiyi-st" id="yiyi-320">表单默认为 <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>.输入框。</span><span class="yiyi-st" id="yiyi-321">Admin添加一些JavaScript快捷方式。</span></p>
</div>
<div class="section" id="s-urlfield">
<span id="urlfield"></span><h3><span class="yiyi-st" id="yiyi-619">URLField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#urlfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.URLField">
<em class="property">class </em><tt class="descname">URLField</tt>(<span class="optional">[</span><em>max_length=200</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.URLField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-322">一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a> 类型的URL</span></p>
<p><span class="yiyi-st" id="yiyi-323">此字段的默认表单widget为<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/widgets.html#django.forms.TextInput" title="django.forms.TextInput"><tt class="xref py py-class docutils literal"><span class="pre">TextInput</span></tt></a>。</span></p>
<p><span class="yiyi-st" id="yiyi-324">与所有<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>子类一样，<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.URLField" title="django.db.models.URLField"><tt class="xref py py-class docutils literal"><span class="pre">URLField</span></tt></a>接受可选的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a>参数。</span><span class="yiyi-st" id="yiyi-325">如果不指定<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField.max_length" title="django.db.models.CharField.max_length"><tt class="xref py py-attr docutils literal"><span class="pre">max_length</span></tt></a>，则使用默认值200。</span></p>
</div>
<div class="section" id="s-uuidfield">
<span id="uuidfield"></span><h3><span class="yiyi-st" id="yiyi-620">UUIDField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#uuidfield" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<dl class="class">
<dt id="django.db.models.UUIDField">
<em class="property">class </em><tt class="descname">UUIDField</tt>(<span class="optional">[</span><em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.UUIDField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-326">一个用来存储UUID的字段。</span><span class="yiyi-st" id="yiyi-327">使用Python的<a class="reference external" href="https://docs.python.org/3/library/uuid.html#uuid.UUID" title="(in Python v3.4)"><tt class="xref py py-class docutils literal"><span class="pre">UUID</span></tt></a>类。 </span><span class="yiyi-st" id="yiyi-328">当使用PostgreSQL数据库时，该字段类型对应的数据库中的数据类型是<tt class="docutils literal"><span class="pre">uuid</span></tt>，使用其他数据库时，数据库对应的是<tt class="docutils literal"><span class="pre">char(32)</span></tt>类型。</span></p>
<p><span class="yiyi-st" id="yiyi-329">使用UUID类型相对于使用具有<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.primary_key" title="django.db.models.Field.primary_key"><tt class="xref py py-attr docutils literal"><span class="pre">primary_key</span></tt></a>参数的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.AutoField" title="django.db.models.AutoField"><tt class="xref py py-class docutils literal"><span class="pre">AutoField</span></tt></a>类型是一个更好的解决方案。 </span><span class="yiyi-st" id="yiyi-330">数据库不会自动生成UUID，所以推荐使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.default" title="django.db.models.Field.default"><tt class="xref py py-attr docutils literal"><span class="pre">default</span></tt></a>参数：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">MyUUIDModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">UUIDField</span><span class="p">(</span><span class="n">primary_key</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="c"># other fields</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-331">注意：这里传递给default是一个可调用的对象（即一个省略了括号的方法），而不是传递一个<tt class="docutils literal"><span class="pre">UUID</span></tt>实例给<tt class="docutils literal"><span class="pre">default</span></tt></span></p>
</div>
</div>
<div class="section" id="s-module-django.db.models.fields.related">
<span id="s-relationship-fields"></span><span id="module-django.db.models.fields.related"></span><span id="relationship-fields"></span><h2><span class="yiyi-st" id="yiyi-573">关系字段</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#module-django.db.models.fields.related" title="Permalink to this headline">¶</a></h2>
<p><span class="yiyi-st" id="yiyi-332">Django 同样定义了一系列的字段来描述数据库之间的关联。</span></p>
<div class="section" id="s-foreignkey">
<span id="s-ref-foreignkey"></span><span id="foreignkey"></span><span id="ref-foreignkey"></span><h3><span class="yiyi-st" id="yiyi-621">ForeignKey</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#foreignkey" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.ForeignKey">
<em class="property">class </em><tt class="descname">ForeignKey</tt>(<em>othermodel</em><span class="optional">[</span>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-333">多对一关系。</span><span class="yiyi-st" id="yiyi-334">需要一个位置参数：与该模型关联的类。</span></p>
<p id="recursive-relationships"><span class="yiyi-st" id="yiyi-335">若要创建一个递归的关联 —— 对象与自己具有多对一的关系 —— 请使用<tt class="docutils literal"><span class="pre">models.ForeignKey('self')</span></tt>。</span></p>
<p id="lazy-relationships"><span class="yiyi-st" id="yiyi-337">如果你需要关联到一个还没有定义的模型，你可以使用模型的名字而不用模型对象本身：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">'Manufacturer'</span><span class="p">)</span>
    <span class="c"># ...</span>

<span class="k">class</span> <span class="nc">Manufacturer</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="c"># ...</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-338">若要引用在其它应用中定义的模型，你可以用带有完整标签名的模型来显式指定。</span><span class="yiyi-st" id="yiyi-339">例如，如果上面提到的<tt class="docutils literal"><span class="pre">Manufacturer</span></tt> 模型是在一个名为<tt class="docutils literal"><span class="pre">production</span></tt> 的应用中定义的，你应该这样使用它：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Car</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">manufacturer</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="s">'production.Manufacturer'</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-340">在解析两个应用之间具有相互依赖的导入时，这种引用将会很有帮助。</span></p>
<p><span class="yiyi-st" id="yiyi-341"><tt class="docutils literal"><span class="pre">ForeignKey</span></tt> 会自动创建数据库索引。</span><span class="yiyi-st" id="yiyi-342">你可以通过设置<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.db_index" title="django.db.models.Field.db_index"><tt class="xref py py-attr docutils literal"><span class="pre">db_index</span></tt></a> 为<tt class="docutils literal"><span class="pre">False</span></tt> 来取消。</span><span class="yiyi-st" id="yiyi-343">如果你创建外键是为了一致性而不是用来Join，或者如果你将创建其它索引例如部分或多列索引，你也许想要避免索引的开销。</span></p>
<div class="admonition warning">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-344">警告</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-345">不建议从一个没有迁移的应用中创建一个<tt class="docutils literal"><span class="pre">ForeignKey</span></tt> 到一个具有迁移的应用。</span><span class="yiyi-st" id="yiyi-346">更多详细信息，请参阅<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/migrations.html#unmigrated-dependencies"><em>依赖性文档</em></a>。</span></p>
</div>
<div class="section" id="s-database-representation">
<span id="database-representation"></span><h4><span class="yiyi-st" id="yiyi-632">数据库中的表示</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#database-representation" title="Permalink to this headline">¶</a></h4>
<p><span class="yiyi-st" id="yiyi-347">在幕后，Django 会在字段名上添加<tt class="docutils literal"><span class="pre">"_id"</span></tt> 来创建数据库中的列名。</span><span class="yiyi-st" id="yiyi-737">在上面的例子中，<tt class="docutils literal"><span class="pre">Car</span></tt> 模型的数据库表将会拥有一个<tt class="docutils literal"><span class="pre">manufacturer_id</span></tt> 列。</span><span class="yiyi-st" id="yiyi-738">（你可以通过显式指定<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.db_column" title="django.db.models.Field.db_column"><tt class="xref py py-attr docutils literal"><span class="pre">db_column</span></tt></a>&nbsp;改变它）。</span><span class="yiyi-st" id="yiyi-739">但是，你的代码永远不应该处理数据库中的列名称，除非你需要编写自定义的SQL。</span><span class="yiyi-st" id="yiyi-740">你应该永远只处理你的模型对象中的字段名称。</span></p>
</div>
<div class="section" id="s-arguments">
<span id="s-foreign-key-arguments"></span><span id="arguments"></span><span id="foreign-key-arguments"></span><h4><span class="yiyi-st" id="yiyi-633">参数</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#arguments" title="Permalink to this headline">¶</a></h4>
<p><span class="yiyi-st" id="yiyi-348"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 接受额外的参数集 —— 全都是可选的 —— 它们定义关联关系如何工作的细节。</span></p>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.limit_choices_to">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">limit_choices_to</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.limit_choices_to" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-349">当这个字段使用<tt class="docutils literal"><span class="pre">模型表单</span></tt>或者Admin 渲染时（默认情况下，查询集中的所有对象都可以使用），为这个字段设置一个可用的选项。</span><span class="yiyi-st" id="yiyi-350">它可以是一个字典、一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/querysets.html#django.db.models.Q" title="django.db.models.Q"><tt class="xref py py-class docutils literal"><span class="pre">Q</span></tt></a> 对象或者一个返回字典或<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/querysets.html#django.db.models.Q" title="django.db.models.Q"><tt class="xref py py-class docutils literal"><span class="pre">Q</span></tt></a>对象的可调用对象。</span></p>
<p><span class="yiyi-st" id="yiyi-351">例如：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">staff_member</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">limit_choices_to</span><span class="o">=</span><span class="p">{</span><span class="s">'is_staff'</span><span class="p">:</span> <span class="bp">True</span><span class="p">})</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-352">将使得<tt class="docutils literal"><span class="pre">模型表单</span></tt> 中对应的字段只列出<tt class="docutils literal"><span class="pre">is_staff=True</span></tt> 的<tt class="docutils literal"><span class="pre">Users</span></tt>。 </span><span class="yiyi-st" id="yiyi-353">这在Django 的Admin 中也可能有用处。</span></p>
<p><span class="yiyi-st" id="yiyi-354">可调用对象的形式同样非常有用，比如与Python 的<tt class="docutils literal"><span class="pre">datetime</span></tt>模块一起使用来限制选择的时间范围。</span><span class="yiyi-st" id="yiyi-355">例如：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">limit_pub_date_choices</span><span class="p">():</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">'pub_date__lte'</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()}</span>

<span class="n">limit_choices_to</span> <span class="o">=</span> <span class="n">limit_pub_date_choices</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-356">如果<tt class="docutils literal"><span class="pre">limit_choices_to</span></tt> 自己本身是或者返回一个用于<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/queries.html#complex-lookups-with-q"><em>复杂查询</em></a>的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/querysets.html#django.db.models.Q" title="django.db.models.Q"><tt class="xref py py-class docutils literal"><span class="pre">Q</span> <span class="pre">对象</span></tt></a>，当字段没有在模型的<tt class="docutils literal"><span class="pre">ModelAdmin</span></tt>中的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/contrib/admin/index.html#django.contrib.admin.ModelAdmin.raw_id_fields" title="django.contrib.admin.ModelAdmin.raw_id_fields"><tt class="xref py py-attr docutils literal"><span class="pre">raw_id_fields</span></tt></a> 列出时，它将只会影响Admin中的可用的选项。</span></p>
<div class="versionchanged">
<span class="title">Changed in Django 1.7:</span> <p><span class="yiyi-st" id="yiyi-357">以前的Django 版本不允许传递一个可调用的对象给<tt class="docutils literal"><span class="pre">limit_choices_to</span></tt>。</span></p>
</div>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-358">注</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-359">如果<tt class="docutils literal"><span class="pre">limit_choices_to</span></tt> 使用可调用对象，这个可调用对象将在每次创建一个新表单的时候都调用。</span><span class="yiyi-st" id="yiyi-360">它还可能在一个模型校验的时候调用，例如被管理命令或者Admin。</span><span class="yiyi-st" id="yiyi-361">Admin 多次构造查询集来验证表单在各种边缘情况下的输入，所以你的可调用对象可能调用多次。</span></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.related_name">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">related_name</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.related_name" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-362">这个名称用于让关联的对象反查到源对象。</span><span class="yiyi-st" id="yiyi-363">它还是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><tt class="xref py py-attr docutils literal"><span class="pre">related_query_name</span></tt></a> 的默认值（关联的模型进行反向过滤时使用的名称）。</span><span class="yiyi-st" id="yiyi-364">完整的解释和示例参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/queries.html#backwards-related-objects"><em>关联对象的文档</em></a>。</span><span class="yiyi-st" id="yiyi-365">注意，当你为<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/models.html#abstract-base-classes"><em>抽象模型</em></a>定义关联关系的时，必须设置这个参数的值；</span><span class="yiyi-st" id="yiyi-366">而且当你这么做的时候需要用到<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/models.html#abstract-related-name"><em>一些特殊语法</em></a>。</span></p>
<p><span class="yiyi-st" id="yiyi-367">如果你不想让Django 创建一个反向关联，请设置<tt class="docutils literal"><span class="pre">related_name</span></tt> 为 <tt class="docutils literal"><span class="pre">'+'</span></tt> 或者以<tt class="docutils literal"><span class="pre">'+'</span></tt> 结尾。 </span><span class="yiyi-st" id="yiyi-368">例如，下面这行将确定<tt class="docutils literal"><span class="pre">User</span></tt> 模型将不会有到这个模型的返回关联：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">'+'</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.related_query_name">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">related_query_name</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.related_query_name" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-369">这个名称用于目标模型的反向过滤。</span><span class="yiyi-st" id="yiyi-370">如果设置了<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><tt class="xref py py-attr docutils literal"><span class="pre">related_name</span></tt></a>，则默认为它的值，否则默认值为模型的名称：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Declare the ForeignKey with related_query_name</span>
<span class="k">class</span> <span class="nc">Tag</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">article</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Article</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">"tags"</span><span class="p">,</span> <span class="n">related_query_name</span><span class="o">=</span><span class="s">"tag"</span><span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>

<span class="c"># That's now the name of the reverse filter</span>
<span class="n">Article</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">tag__name</span><span class="o">=</span><span class="s">"important"</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.to_field">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">to_field</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.to_field" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-371">关联到的关联对象的字段名称。</span><span class="yiyi-st" id="yiyi-372">默认地，Django 使用关联对象的主键。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.db_constraint">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">db_constraint</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.db_constraint" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-373">控制是否在数据库中为这个外键创建约束。</span><span class="yiyi-st" id="yiyi-374">默认值为<tt class="docutils literal"><span class="pre">True</span></tt>，而且这几乎一定是你想要的效果；</span><span class="yiyi-st" id="yiyi-375">设置成<tt class="docutils literal"><span class="pre">False</span></tt> 对数据的完整性来说是很糟糕的。</span><span class="yiyi-st" id="yiyi-376">即便如此，有一些场景你也许想要这么设置：</span></p>
<ul class="simple">
<li><span class="yiyi-st" id="yiyi-644">你有遗留的无效数据。</span></li>
<li><span class="yiyi-st" id="yiyi-645">你正在对数据库缩容。</span></li>
</ul>
<p><span class="yiyi-st" id="yiyi-377">如果被设置成<tt class="docutils literal"><span class="pre">False</span></tt>，访问一个不存在的关联对象将抛出  <tt class="docutils literal"><span class="pre">DoesNotExist</span></tt> 异常。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.on_delete">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">on_delete</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.on_delete" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-378">当一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 引用的对象被删除时，Django 默认模拟SQL 的<tt class="docutils literal"><span class="pre">ON</span> <span class="pre">DELETE</span> <span class="pre">CASCADE</span></tt> 的约束行为，并且删除包含该<tt class="docutils literal"><span class="pre">ForeignKey</span></tt>的对象。</span><span class="yiyi-st" id="yiyi-379">这种行为可以通过设置<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><tt class="xref py py-attr docutils literal"><span class="pre">on_delete</span></tt></a> 参数来改变。</span><span class="yiyi-st" id="yiyi-380">例如，如果你有一个可以为空的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a>，在其引用的对象被删除的时你想把这个ForeignKey 设置为空：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">User</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">null</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET_NULL</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-381"> <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.on_delete" title="django.db.models.ForeignKey.on_delete"><tt class="xref py py-attr docutils literal"><span class="pre">on_delete</span></tt></a> 在<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/models.html#module-django.db.models" title="django.db.models"><tt class="xref py py-mod docutils literal"><span class="pre">django.db.models</span></tt></a>中可以找到的值有：</span></p>
<ul>
<li><dl class="attribute">
<dt id="django.db.models.CASCADE">
<tt class="descname">CASCADE</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CASCADE" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-382">级联删除；</span><span class="yiyi-st" id="yiyi-383">默认值。</span></p>
</dd></dl>
</li>
<li><dl class="attribute">
<dt id="django.db.models.PROTECT">
<tt class="descname">PROTECT</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.PROTECT" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-384">抛出<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/exceptions.html#django.db.models.ProtectedError" title="django.db.models.ProtectedError"><tt class="xref py py-exc docutils literal"><span class="pre">ProtectedError</span></tt></a> 以阻止被引用对象的删除，它是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/exceptions.html#django.db.IntegrityError" title="django.db.IntegrityError"><tt class="xref py py-exc docutils literal"><span class="pre">django.db.IntegrityError</span></tt></a> 的一个子类。</span></p>
</dd></dl>
</li>
<li><dl class="attribute">
<dt id="django.db.models.SET_NULL">
<tt class="descname">SET_NULL</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.SET_NULL" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-385">把<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 设置为null；</span><span class="yiyi-st" id="yiyi-386"> <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> 参数为<tt class="docutils literal"><span class="pre">True</span></tt> 时才可以这样做。</span></p>
</dd></dl>
</li>
<li><dl class="attribute">
<dt id="django.db.models.SET_DEFAULT">
<tt class="descname">SET_DEFAULT</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.SET_DEFAULT" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-387"> <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 值设置成它的默认值；</span><span class="yiyi-st" id="yiyi-388">此时必须设置<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 的default 参数。</span></p>
</dd></dl>
</li>
<li><dl class="function">
<dt id="django.db.models.SET">
<tt class="descname">SET</tt>()<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.SET" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-389">设置<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 为传递给<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.SET" title="django.db.models.SET"><tt class="xref py py-func docutils literal"><span class="pre">SET()</span></tt></a> 的值，如果传递的是一个可调用对象，则为调用后的结果。</span><span class="yiyi-st" id="yiyi-390">在大部分情形下，传递一个可调用对象用于避免models.py 在导入时执行查询：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.contrib.auth</span> <span class="kn">import</span> <span class="n">get_user_model</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">def</span> <span class="nf">get_sentinel_user</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">get_user_model</span><span class="p">()</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get_or_create</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="s">'deleted'</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">MyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span>
                             <span class="n">on_delete</span><span class="o">=</span><span class="n">models</span><span class="o">.</span><span class="n">SET</span><span class="p">(</span><span class="n">get_sentinel_user</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>
</li>
<li><dl class="attribute">
<dt id="django.db.models.DO_NOTHING">
<tt class="descname">DO_NOTHING</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DO_NOTHING" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-391">不采取任何动作。</span><span class="yiyi-st" id="yiyi-392">如果你的数据库后端强制引用完整性，它将引发一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/exceptions.html#django.db.IntegrityError" title="django.db.IntegrityError"><tt class="xref py py-exc docutils literal"><span class="pre">IntegrityError</span></tt></a> ，除非你手动添加一个<tt class="docutils literal"><span class="pre">ON</span> <span class="pre">DELETE</span></tt> 约束给数据库自动（可能要用到<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/initial-data.html#initial-sql"><em>初始化的SQL</em></a>）。</span></p>
</dd></dl>
</li>
</ul>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.swappable">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">swappable</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.swappable" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><span class="yiyi-st" id="yiyi-393">控制迁移框架的的重复行为如果该<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 指向一个可切换的模型。</span><span class="yiyi-st" id="yiyi-394">如果它是默认值<tt class="docutils literal"><span class="pre">True</span></tt>，那么如果<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 指向的模型与<tt class="docutils literal"><span class="pre">settings.AUTH_USER_MODEL</span></tt> 匹配（或其它可切换的模型），则保存在迁移中的关联关系将使用对setting 中引用而不是直接对模型的引用。</span></p>
<p><span class="yiyi-st" id="yiyi-396">只有当你确定你的模型将永远指向切换后的模型 —— 例如如果它是专门为你的自定义用户模型设计的模型时，你才会想将它设置成<tt class="docutils literal"><span class="pre">False</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-397">设置为<tt class="docutils literal"><span class="pre">False</span></tt> 并不表示你可以引用可切换的模型即使在它被切换出去之后 —— <tt class="docutils literal"><span class="pre">False</span></tt> 只是表示生成的迁移中ForeignKey 将始终引用你指定的准确模型（所以，如果用户试图允许一个你不支持的User 模型时将会失败）。</span></p>
<p><span class="yiyi-st" id="yiyi-398">如果有疑问，请保留它的默认值<tt class="docutils literal"><span class="pre">True</span></tt>。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ForeignKey.allow_unsaved_instance_assignment">
<tt class="descclassname">ForeignKey.</tt><tt class="descname">allow_unsaved_instance_assignment</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.allow_unsaved_instance_assignment" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8:</span> <p><span class="yiyi-st" id="yiyi-399">添加这个标志是为了向后兼容，因为老版本的Django 始终允许赋值未保存的模型实例。</span></p>
</div>
<p><span class="yiyi-st" id="yiyi-400">Django 阻止未保存的模型实例被分配给一个<tt class="docutils literal"><span class="pre">ForeignKey</span></tt> 字段以防止意味的数据丢失（当保存一个模型实例时，未保存的外键将默默忽略）。</span></p>
<p><span class="yiyi-st" id="yiyi-401">如果你需要允许赋值未保存的实例且不关心数据的丢失（例如你不会保存对象到数据库），你可以通过创建这个字段的子类并设置其<tt class="docutils literal"><span class="pre">allow_unsaved_instance_assignment</span></tt> 属性为<tt class="docutils literal"><span class="pre">True</span></tt> 来关闭这个检查。</span><span class="yiyi-st" id="yiyi-402">例如：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">UnsavedForeignKey</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">):</span>
    <span class="c"># A ForeignKey which can point to an unsaved object</span>
    <span class="n">allow_unsaved_instance_assignment</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">class</span> <span class="nc">Book</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">UnsavedForeignKey</span><span class="p">(</span><span class="n">Author</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>
</div>
</div>
<div class="section" id="s-manytomanyfield">
<span id="s-ref-manytomany"></span><span id="manytomanyfield"></span><span id="ref-manytomany"></span><h3><span class="yiyi-st" id="yiyi-622">ManyToManyField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#manytomanyfield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.ManyToManyField">
<em class="property">class </em><tt class="descname">ManyToManyField</tt>(<em>othermodel</em><span class="optional">[</span>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-403">一个多对多关联。</span><span class="yiyi-st" id="yiyi-404">要求一个关键字参数：与该模型关联的类，与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 的工作方式完全一样，包括<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#recursive-relationships"><em>递归关系</em></a> 和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#lazy-relationships"><em>惰性关系</em></a>。</span></p>
<p><span class="yiyi-st" id="yiyi-405">关联的对象可以通过字段的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/relations.html#django.db.models.fields.related.RelatedManager" title="django.db.models.fields.related.RelatedManager"><tt class="xref py py-class docutils literal"><span class="pre">RelatedManager</span></tt></a> 添加、删除和创建。</span></p>
<div class="admonition warning">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-406">警告</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-407">不建议从一个没有迁移的应用中创建一个<tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>到一个具有迁移的应用。 </span><span class="yiyi-st" id="yiyi-408">更多细节参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/migrations.html#unmigrated-dependencies"><em>依赖性文档</em></a>。</span></p>
</div>
<div class="section" id="s-id1">
<span id="id1"></span><h4><span class="yiyi-st" id="yiyi-634">数据库中的表示</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#id1" title="Permalink to this headline">¶</a></h4>
<p><span class="yiyi-st" id="yiyi-409">在幕后，Django 创建一个中间表来表示多对多关系。</span><span class="yiyi-st" id="yiyi-410">默认情况下，这张中间表的名称使用多对多字段的名称和包含这张表的模型的名称生成。</span><span class="yiyi-st" id="yiyi-411">因为某些数据库支持的表的名字的长度有限制，这些表的名称将自动截短到64 个字符并加上一个唯一性的哈希值。</span><span class="yiyi-st" id="yiyi-412">这意味着，你看的表的名称可能类似 <tt class="docutils literal"><span class="pre">author_books_9cdf4</span></tt>；</span><span class="yiyi-st" id="yiyi-413">这再正常不过了。</span><span class="yiyi-st" id="yiyi-414">你可以使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.db_table" title="django.db.models.ManyToManyField.db_table"><tt class="xref py py-attr docutils literal"><span class="pre">db_table</span></tt></a> 选项手工提供中间表的名称。</span></p>
</div>
<div class="section" id="s-manytomany-arguments">
<span id="s-id2"></span><span id="manytomany-arguments"></span><span id="id2"></span><h4><span class="yiyi-st" id="yiyi-635">参数</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#manytomany-arguments" title="Permalink to this headline">¶</a></h4>
<p><span class="yiyi-st" id="yiyi-415"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> 接收一个参数集来控制关联关系的功能 —— 它们都是可选的。</span></p>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.related_name">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">related_name</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.related_name" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-416">与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><tt class="xref py py-attr docutils literal"><span class="pre">ForeignKey.related_name</span></tt></a> 相同。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.related_query_name">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">related_query_name</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.related_query_name" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-417">与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.related_query_name" title="django.db.models.ForeignKey.related_query_name"><tt class="xref py py-attr docutils literal"><span class="pre">ForeignKey.related_query_name</span></tt></a> 相同。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.limit_choices_to">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">limit_choices_to</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.limit_choices_to" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-418">与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.limit_choices_to" title="django.db.models.ForeignKey.limit_choices_to"><tt class="xref py py-attr docutils literal"><span class="pre">ForeignKey.limit_choices_to</span></tt></a> 相同。</span></p>
<p><span class="yiyi-st" id="yiyi-419"><tt class="docutils literal"><span class="pre">limit_choices_to</span></tt> 对于使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><tt class="xref py py-attr docutils literal"><span class="pre">through</span></tt></a> 参数自定义中间表的<tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> 不生效。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.symmetrical">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">symmetrical</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.symmetrical" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-420">只用于与自身进行关联的ManyToManyField。</span><span class="yiyi-st" id="yiyi-421">例如下面的模型：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">friends</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="s">"self"</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-422">当Django 处理这个模型的时候，它定义该模型具有一个与自身具有多对多关联的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a>，因此它不会向<tt class="docutils literal"><span class="pre">Person</span></tt> 类添加<tt class="docutils literal"><span class="pre">person_set</span></tt> 属性。</span><span class="yiyi-st" id="yiyi-423">Django 将假定这个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> 字段是对称的 —— 如果我是你的朋友，那么你也是我的朋友。</span></p>
<p><span class="yiyi-st" id="yiyi-424">如果你希望与<tt class="docutils literal"><span class="pre">self</span></tt> 进行多对多关联的关系不具有对称性，可以设置<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.symmetrical" title="django.db.models.ManyToManyField.symmetrical"><tt class="xref py py-attr docutils literal"><span class="pre">symmetrical</span></tt></a> 为<tt class="docutils literal"><span class="pre">False</span></tt>。</span><span class="yiyi-st" id="yiyi-425">这会强制让Django 添加一个描述器给反向的关联关系，以使得<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> 的关联关系不是对称的。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.through">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">through</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.through" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-426">Django 会自动创建一个表来管理多对多关系。</span><span class="yiyi-st" id="yiyi-427">不过，如果你希望手动指定中介表，可以使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.through" title="django.db.models.ManyToManyField.through"><tt class="xref py py-attr docutils literal"><span class="pre">through</span></tt></a> 选项来指定Django 模型来表示你想要使用的中介表。</span></p>
<p><span class="yiyi-st" id="yiyi-428">这个选项最常见的使用场景是当你想要关联<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/models.html#intermediary-manytomany"><em>额外的数据到多对多关联关系</em></a>的时候。</span></p>
<p><span class="yiyi-st" id="yiyi-429">如果你没有显式指定<tt class="docutils literal"><span class="pre">through</span></tt> 的模型，仍然会有一个隐式的<tt class="docutils literal"><span class="pre">through</span></tt> 模型类，你可以用它来直接访问对应的表示关联关系的数据库表。</span><span class="yiyi-st" id="yiyi-430">它由三个字段来链接模型。</span></p>
<p><span class="yiyi-st" id="yiyi-431">如果源模型和目标不同，则生成以下字段：</span></p>
<ul class="simple">
<li><span class="yiyi-st" id="yiyi-646"><tt class="docutils literal"><span class="pre">id</span></tt>：关系的主键。</span></li>
<li><span class="yiyi-st" id="yiyi-647"><tt class="docutils literal"><span class="pre">&lt;containing_model&gt;_id</span></tt>：声明<tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> 字段的模型的<tt class="docutils literal"><span class="pre">id</span></tt>。</span></li>
<li><span class="yiyi-st" id="yiyi-648"><tt class="docutils literal"><span class="pre">&lt;other_model&gt;_id</span></tt>：<tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> 字段指向的模型的<tt class="docutils literal"><span class="pre">id</span></tt>。</span></li>
</ul>
<p><span class="yiyi-st" id="yiyi-432">如果<tt class="docutils literal"><span class="pre">ManyToManyField</span></tt> 的源模型和目标模型相同，则生成以下字段：</span></p>
<ul class="simple">
<li><span class="yiyi-st" id="yiyi-649"><tt class="docutils literal"><span class="pre">id</span></tt>：关系的主键。</span></li>
<li><span class="yiyi-st" id="yiyi-650"><tt class="docutils literal"><span class="pre">from_&lt;model&gt;_id</span></tt>：源模型实例的<tt class="docutils literal"><span class="pre">id</span></tt>。</span></li>
<li><span class="yiyi-st" id="yiyi-651"><tt class="docutils literal"><span class="pre">to_&lt;model&gt;_id</span></tt>：目标模型实例的<tt class="docutils literal"><span class="pre">id</span></tt>。</span></li>
</ul>
<p><span class="yiyi-st" id="yiyi-433">这个类可以让一个给定的模型像普通的模型那样查询与之相关联的记录。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.through_fields">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">through_fields</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.through_fields" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><span class="yiyi-st" id="yiyi-434">只能在指定了自定义中间模型的时候使用。 </span><span class="yiyi-st" id="yiyi-435">Django 一般情况会自动决定使用中间模型的哪些字段来建立多对多关联。</span><span class="yiyi-st" id="yiyi-436">但是，考虑如下模型：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">Person</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
    <span class="n">members</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">through</span><span class="o">=</span><span class="s">'Membership'</span><span class="p">,</span> <span class="n">through_fields</span><span class="o">=</span><span class="p">(</span><span class="s">'group'</span><span class="p">,</span> <span class="s">'person'</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">Membership</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">group</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Group</span><span class="p">)</span>
    <span class="n">person</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">)</span>
    <span class="n">inviter</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Person</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">"membership_invites"</span><span class="p">)</span>
    <span class="n">invite_reason</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-437"><tt class="docutils literal"><span class="pre">Membership</span></tt> 有<em>两个</em> 外键指向<tt class="docutils literal"><span class="pre">Person</span></tt> （<tt class="docutils literal"><span class="pre">person</span></tt> 和<tt class="docutils literal"><span class="pre">inviter</span></tt>），这使得关联关系含混不清并让Django 不知道使用哪一个。</span><span class="yiyi-st" id="yiyi-438">在这种情况下，你必须使用<tt class="docutils literal"><span class="pre">through_fields</span></tt> 明确指定Django 应该使用哪些外键，就像上面例子一样。</span></p>
<p><span class="yiyi-st" id="yiyi-439"><tt class="docutils literal"><span class="pre">through_fields</span></tt> 接收一个二元组<tt class="docutils literal"><span class="pre">('field1',</span> <span class="pre">'field2')</span></tt>，其中<tt class="docutils literal"><span class="pre">field1</span></tt> 为指向定义<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> 字段的模型的外键名称（本例中为<tt class="docutils literal"><span class="pre">group</span></tt>），<tt class="docutils literal"><span class="pre">field2</span></tt> 为指向目标模型的外键的名称（本例中为<tt class="docutils literal"><span class="pre">person</span></tt>）。</span></p>
<p><span class="yiyi-st" id="yiyi-440">当中间模型具有多个外键指向多对多关联关系模型中的任何一个（或两个），你<em>必须</em> 指定<tt class="docutils literal"><span class="pre">through_fields</span></tt>。</span><span class="yiyi-st" id="yiyi-441">这通用适用于<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#recursive-relationships"><em>递归的关联关系</em></a>，当用到中间模型而有多个外键指向该模型时，或当你想显式指定Django 应该用到的两个字段时。</span></p>
<p><span class="yiyi-st" id="yiyi-442">递归的关联关系使用的中间模型始终定义为非对称的，也就是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.symmetrical" title="django.db.models.ManyToManyField.symmetrical"><tt class="xref py py-attr docutils literal"><span class="pre">symmetrical=False</span></tt></a> —— 所以具有源和目标的概念。</span><span class="yiyi-st" id="yiyi-443">这种情况下，<tt class="docutils literal"><span class="pre">'field1'</span></tt> 将作为管理关系的源，而<tt class="docutils literal"><span class="pre">'field2'</span></tt> 作为目标。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.db_table">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">db_table</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.db_table" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-444">为存储多对多数据而创建的表的名称。</span><span class="yiyi-st" id="yiyi-445">如果没有提供，Django 将基于定义关联关系的模型和字段假设一个默认的名称。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.db_constraint">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">db_constraint</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.db_constraint" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-446">控制中间表中的外键是否创建约束。</span><span class="yiyi-st" id="yiyi-447">默认为<tt class="docutils literal"><span class="pre">True</span></tt>，而且这是几乎就是你想要的；</span><span class="yiyi-st" id="yiyi-448">设置为<tt class="docutils literal"><span class="pre">False</span></tt> 对数据完整性将非常糟糕。</span><span class="yiyi-st" id="yiyi-449">下面是你可能需要这样设置的一些场景：</span></p>
<ul class="simple">
<li><span class="yiyi-st" id="yiyi-652">你具有不合法的遗留数据。</span></li>
<li><span class="yiyi-st" id="yiyi-653">你正在对数据库缩容。</span></li>
</ul>
<p><span class="yiyi-st" id="yiyi-450">不可以同时传递<tt class="docutils literal"><span class="pre">db_constraint</span></tt> 和 <tt class="docutils literal"><span class="pre">through</span></tt>。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.swappable">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">swappable</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.swappable" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><span class="yiyi-st" id="yiyi-451">控制<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> 指向一个可切换的模型时迁移框架的行为。</span><span class="yiyi-st" id="yiyi-452">如果它是默认值<tt class="docutils literal"><span class="pre">True</span></tt>，那么如果<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> 指向的模型与<tt class="docutils literal"><span class="pre">settings.AUTH_USER_MODEL</span></tt> 匹配（或其它可切换的模型），则保存在迁移中的关联关系将使用对setting 中引用而不是直接对模型的引用。</span></p>
<p><span class="yiyi-st" id="yiyi-454">只有当你确定你的模型将永远指向切换后的模型 —— 例如如果它是专门为你的自定义用户模型设计的模型时，你才会想将它设置成<tt class="docutils literal"><span class="pre">False</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-455">如果不确定，请将它保留为<tt class="docutils literal"><span class="pre">True</span></tt>。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.ManyToManyField.allow_unsaved_instance_assignment">
<tt class="descclassname">ManyToManyField.</tt><tt class="descname">allow_unsaved_instance_assignment</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField.allow_unsaved_instance_assignment" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><span class="yiyi-st" id="yiyi-456">与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.allow_unsaved_instance_assignment" title="django.db.models.ForeignKey.allow_unsaved_instance_assignment"><tt class="xref py py-attr docutils literal"><span class="pre">ForeignKey.allow_unsaved_instance_assignment</span></tt></a> 的工作方式类似。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-457"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ManyToManyField" title="django.db.models.ManyToManyField"><tt class="xref py py-class docutils literal"><span class="pre">ManyToManyField</span></tt></a> 不支持<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.validators" title="django.db.models.Field.validators"><tt class="xref py py-attr docutils literal"><span class="pre">validators</span></tt></a>。</span></p>
<p><span class="yiyi-st" id="yiyi-458"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a> 不生效，因为无法在数据库层次要求关联关系。</span></p>
</div>
</div>
<div class="section" id="s-onetoonefield">
<span id="s-ref-onetoone"></span><span id="onetoonefield"></span><span id="ref-onetoone"></span><h3><span class="yiyi-st" id="yiyi-623">OneToOneField</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#onetoonefield" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="django.db.models.OneToOneField">
<em class="property">class </em><tt class="descname">OneToOneField</tt>(<em>othermodel</em><span class="optional">[</span>, <em>parent_link=False</em>, <em>**options</em><span class="optional">]</span>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.OneToOneField" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<p><span class="yiyi-st" id="yiyi-459">一对一关联关系。</span><span class="yiyi-st" id="yiyi-460">概念上讲，这个字段很像是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 设置了<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><tt class="xref py py-attr docutils literal"><span class="pre">unique=True</span></tt></a>，不同的是它会直接返回关系另一边的单个对象。</span></p>
<p><span class="yiyi-st" id="yiyi-461">它最主要的用途是作为扩展自另外一个模型的主键；</span><span class="yiyi-st" id="yiyi-462">例如，<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/models.html#multi-table-inheritance"><em>多表继承</em></a>就是通过对子模型添加一个隐式的一对一关联关系到父模型实现的。</span></p>
<p><span class="yiyi-st" id="yiyi-463">需要一个位置参数：与该模型关联的类。 </span><span class="yiyi-st" id="yiyi-464">它的工作方式与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 完全一致，包括所有与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#recursive-relationships"><em>递归关系</em></a>和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#lazy-relationships"><em>惰性关系</em></a>相关的选项。</span></p>
<p><span class="yiyi-st" id="yiyi-465">如果你没有指定<tt class="docutils literal"><span class="pre">OneToOneField</span></tt> 的<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey.related_name" title="django.db.models.ForeignKey.related_name"><tt class="xref py py-attr docutils literal"><span class="pre">related_name</span></tt></a> 参数，Django 将使用当前模型的小写的名称作为默认值。</span></p>
<p><span class="yiyi-st" id="yiyi-466">例如下面的例子：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf</span> <span class="kn">import</span> <span class="n">settings</span>
<span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="k">class</span> <span class="nc">MySpecialUser</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">)</span>
    <span class="n">supervisor</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">OneToOneField</span><span class="p">(</span><span class="n">settings</span><span class="o">.</span><span class="n">AUTH_USER_MODEL</span><span class="p">,</span> <span class="n">related_name</span><span class="o">=</span><span class="s">'supervisor_of'</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-467">你将使得<tt class="docutils literal"><span class="pre">User</span></tt> 模型具有以下属性：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s">'myspecialuser'</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">hasattr</span><span class="p">(</span><span class="n">user</span><span class="p">,</span> <span class="s">'supervisor_of'</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-468">当反向访问关联关系时，如果关联的对象不存在对应的实例，则抛出<tt class="docutils literal"><span class="pre">DoesNotExist</span></tt> 异常。</span><span class="yiyi-st" id="yiyi-469">例如，如果一个User 没有<tt class="docutils literal"><span class="pre">MySpecialUser</span></tt> 指定的supervisor：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">user</span><span class="o">.</span><span class="n">supervisor_of</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">DoesNotExist</span>: <span class="n">User matching query does not exist.</span>
</pre></div>
</div>
<p id="onetoone-arguments"><span class="yiyi-st" id="yiyi-470">另外，<tt class="docutils literal"><span class="pre">OneToOneField</span></tt> 除了接收<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.ForeignKey" title="django.db.models.ForeignKey"><tt class="xref py py-class docutils literal"><span class="pre">ForeignKey</span></tt></a> 接收的所有额外的参数之外，还有另外一个参数：</span></p>
<dl class="attribute">
<dt id="django.db.models.OneToOneField.parent_link">
<tt class="descclassname">OneToOneField.</tt><tt class="descname">parent_link</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.OneToOneField.parent_link" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-471">当它为<tt class="docutils literal"><span class="pre">True</span></tt> 并在继承自另一个<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/glossary.html#term-concrete-model"><em class="xref std std-term">具体模型</em></a> 的模型中使用时，表示该字段应该用于反查的父类的链接，而不是在子类化时隐式创建的<tt class="docutils literal"><span class="pre">OneToOneField</span></tt>。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-472"><tt class="docutils literal"><span class="pre">OneToOneField</span></tt> 的使用示例参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/examples/one_to_one.html"><em>One-to-one 关联关系</em></a>。</span></p>
</div>
</div>
<div class="section" id="s-field-api-reference">
<span id="field-api-reference"></span><h2><span class="yiyi-st" id="yiyi-574">Field API 参考</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-api-reference" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="django.db.models.Field">
<em class="property">class </em><tt class="descname">Field</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-473"><tt class="docutils literal"><span class="pre">Field</span></tt> 是一个抽象的类, 用来代表数据库中的表的一列. </span><span class="yiyi-st" id="yiyi-474">Django 使用这些fields 去创建表 (<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.db_type" title="django.db.models.Field.db_type"><tt class="xref py py-meth docutils literal"><span class="pre">db_type()</span></tt></a>), 去建立Python中的类型和数据库中类型的映射关系 (<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_value()</span></tt></a>) 反之亦然 (<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.from_db_value" title="django.db.models.Field.from_db_value"><tt class="xref py py-meth docutils literal"><span class="pre">from_db_value()</span></tt></a>), 并且实现<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/lookups.html"><em>Lookup API reference</em></a> (<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_prep_lookup" title="django.db.models.Field.get_prep_lookup"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_lookup()</span></tt></a>).</span></p>
<p><span class="yiyi-st" id="yiyi-475">field 是不同Django版本API中最根本的部分，尤其是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/instances.html#django.db.models.Model" title="django.db.models.Model"><tt class="xref py py-class docutils literal"><span class="pre">models</span></tt></a> and <a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/querysets.html#django.db.models.query.QuerySet" title="django.db.models.query.QuerySet"><tt class="xref py py-class docutils literal"><span class="pre">querysets</span></tt></a>.</span></p>
<p><span class="yiyi-st" id="yiyi-476">在模型中，一个字段被实例化为类的属性，并表现为一个特定的表的列，详情查看<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/db/models.html"><em>Models</em></a>. </span><span class="yiyi-st" id="yiyi-477">它具有<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.null" title="django.db.models.Field.null"><tt class="xref py py-attr docutils literal"><span class="pre">null</span></tt></a>和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.unique" title="django.db.models.Field.unique"><tt class="xref py py-attr docutils literal"><span class="pre">唯一</span></tt></a>等属性，以及Django用于将字段值映射到数据库特定值的方法。</span></p>
<p><span class="yiyi-st" id="yiyi-478"><tt class="docutils literal"><span class="pre">字段</span></tt>是<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/lookups.html#django.db.models.lookups.RegisterLookupMixin" title="django.db.models.lookups.RegisterLookupMixin"><tt class="xref py py-class docutils literal"><span class="pre">RegisterLookupMixin</span></tt></a>的子类，因此可以在其上注册<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/lookups.html#django.db.models.Transform" title="django.db.models.Transform"><tt class="xref py py-class docutils literal"><span class="pre">Transform</span></tt></a>和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/lookups.html#django.db.models.Lookup" title="django.db.models.Lookup"><tt class="xref py py-class docutils literal"><span class="pre">Lookup</span></tt></a> <tt class="docutils literal"><span class="pre">QuerySet</span></tt> s（例如<tt class="docutils literal"><span class="pre">field_name__exact =“foo”</span></tt>）。</span><span class="yiyi-st" id="yiyi-741">默认情况下，所有<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/querysets.html#field-lookups"><em>内置查找</em></a>都已注册。</span></p>
<p><span class="yiyi-st" id="yiyi-479">Django的所有内建字段，如<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.CharField" title="django.db.models.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>都是<tt class="docutils literal"><span class="pre">Field</span></tt>的特定实现。</span><span class="yiyi-st" id="yiyi-480">如果您需要自定义字段，则可以将任何内置字段子类化，也可以从头开始写入<tt class="docutils literal"><span class="pre">字段</span></tt>。</span><span class="yiyi-st" id="yiyi-481">无论哪种情况，请参阅<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html"><em>编写自定义模型字段</em></a>。</span></p>
<dl class="attribute">
<dt id="django.db.models.Field.description">
<tt class="descname">description</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.description" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-482">字段的详细说明，例如用于<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/contrib/admin/admindocs.html#module-django.contrib.admindocs" title="django.contrib.admindocs: Django&#39;s admin documentation generator."><tt class="xref py py-mod docutils literal"><span class="pre">django.contrib.admindocs</span></tt></a>应用程序。</span></p>
<p><span class="yiyi-st" id="yiyi-483">描述可以是以下形式：</span></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">description</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">"String (up to </span><span class="si">%(max_length)s</span><span class="s">)"</span><span class="p">)</span>
</pre></div>
</div>
<p><span class="yiyi-st" id="yiyi-484">其中参数从字段的<tt class="docutils literal"><span class="pre">__ dict __</span></tt>插入。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-485">要将<tt class="docutils literal"><span class="pre">Field</span></tt>映​​射到数据库特定类型，Django公开了两种方法：</span></p>
<dl class="method">
<dt id="django.db.models.Field.get_internal_type">
<tt class="descname">get_internal_type</tt>()<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_internal_type" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-486">返回一个字符串，命名此字段以用于后端特定用途。</span><span class="yiyi-st" id="yiyi-487">默认情况下，它返回类名。</span></p>
<p><span class="yiyi-st" id="yiyi-488">有关自定义字段中的用法，请参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html#emulating-built-in-field-types"><em>模拟内置字段类型</em></a>。</span></p>
</dd></dl>
<dl class="method">
<dt id="django.db.models.Field.db_type">
<tt class="descname">db_type</tt>(<em>connection</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.db_type" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-489">返回<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><tt class="xref py py-class docutils literal"><span class="pre">字段</span></tt></a>的数据库列数据类型，同时考虑<tt class="docutils literal"><span class="pre">连接</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-490">有关自定义字段中的用法，请参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html#custom-database-types"><em>自定义数据库类型</em></a>。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-491">有三种主要情况，Django需要与数据库后端和字段交互：</span></p>
<ul class="simple">
<li><span class="yiyi-st" id="yiyi-654">当它查询数据库（Python值 转为 数据库后端值）</span></li>
<li><span class="yiyi-st" id="yiyi-655">当它从数据库加载数据（数据库后端值 转为 Python值）</span></li>
<li><span class="yiyi-st" id="yiyi-656">当它保存到数据库（Python值 转为 数据库后端值）</span></li>
</ul>
<p><span class="yiyi-st" id="yiyi-492">查询时，使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_value()</span></tt></a>和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_value()</span></tt></a>：</span></p>
<dl class="method">
<dt id="django.db.models.Field.get_prep_value">
<tt class="descname">get_prep_value</tt>(<em>value</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_prep_value" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-493"><tt class="docutils literal"><span class="pre">value</span></tt>是模型属性的当前值，方法应以已准备好用作查询中的参数的格式返回数据。</span></p>
<p><span class="yiyi-st" id="yiyi-494">有关使用方式，请参阅<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html#converting-python-objects-to-query-values"><em>将Python对象转换为查询值</em></a>。</span></p>
</dd></dl>
<dl class="method">
<dt id="django.db.models.Field.get_db_prep_value">
<tt class="descname">get_db_prep_value</tt>(<em>value</em>, <em>connection</em>, <em>prepared=False</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_db_prep_value" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-495">将<tt class="docutils literal"><span class="pre">值</span></tt>转换为后端特定值。</span><span class="yiyi-st" id="yiyi-496">如果<tt class="docutils literal"><span class="pre">prepared = True</span></tt>和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_value()</span></tt></a> if为<tt class="docutils literal"><span class="pre">False</span></tt>，则默认返回<tt class="docutils literal"><span class="pre">值</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-497">有关用法，请参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html#converting-query-values-to-database-values"><em>将查询值转换为数据库值</em></a>。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-498">加载数据时，使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.from_db_value" title="django.db.models.Field.from_db_value"><tt class="xref py py-meth docutils literal"><span class="pre">from_db_value()</span></tt></a>：</span></p>
<dl class="method">
<dt id="django.db.models.Field.from_db_value">
<tt class="descname">from_db_value</tt>(<em>value</em>, <em>expression</em>, <em>connection</em>, <em>context</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.from_db_value" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><span class="yiyi-st" id="yiyi-499">将数据库返回的值转换为Python对象。</span><span class="yiyi-st" id="yiyi-500">它与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_prep_value" title="django.db.models.Field.get_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_value()</span></tt></a>相反。</span></p>
<p><span class="yiyi-st" id="yiyi-501">此方法不用于大多数内置字段，因为数据库后端已返回正确的Python类型，或后端本身执行转换。</span></p>
<p><span class="yiyi-st" id="yiyi-502">有关用法，请参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html#converting-values-to-python-objects"><em>将值转换为Python对象</em></a>。</span></p>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-503">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-504">出于性能原因，<tt class="docutils literal"><span class="pre">from_db_value</span></tt>在不需要它的字段（所有Django字段）上不实现为无操作。</span><span class="yiyi-st" id="yiyi-505">因此，您不能在定义中调用<tt class="docutils literal"><span class="pre">super</span></tt>。</span></p>
</div>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-506">保存时，使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.pre_save" title="django.db.models.Field.pre_save"><tt class="xref py py-meth docutils literal"><span class="pre">pre_save()</span></tt></a>和<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_db_prep_save" title="django.db.models.Field.get_db_prep_save"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_save()</span></tt></a></span></p>
<dl class="method">
<dt id="django.db.models.Field.get_db_prep_save">
<tt class="descname">get_db_prep_save</tt>(<em>value</em>, <em>connection</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_db_prep_save" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-507">与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_value()</span></tt></a>相同，但在字段值必须<em>保存到数据库</em>时调用。</span><span class="yiyi-st" id="yiyi-508">默认返回<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_value()</span></tt></a>。</span></p>
</dd></dl>
<dl class="method">
<dt id="django.db.models.Field.pre_save">
<tt class="descname">pre_save</tt>(<em>model_instance</em>, <em>add</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.pre_save" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-509">在<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_db_prep_save" title="django.db.models.Field.get_db_prep_save"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_save()</span></tt></a>之前调用方法以在保存之前准备值（例如，对于<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.DateField.auto_now" title="django.db.models.DateField.auto_now"><tt class="xref py py-attr docutils literal"><span class="pre">DateField.auto_now</span></tt></a>）。</span></p>
<p><span class="yiyi-st" id="yiyi-510"><tt class="docutils literal"><span class="pre">model_instance</span></tt>是此字段所属的实例，<tt class="docutils literal"><span class="pre">add</span></tt>是实例是否第一次保存到数据库。</span></p>
<p><span class="yiyi-st" id="yiyi-511">它应该返回此字段的<tt class="docutils literal"><span class="pre">model_instance</span></tt>适当属性的值。</span><span class="yiyi-st" id="yiyi-512">属性名称位于<tt class="docutils literal"><span class="pre">self.attname</span></tt>（这是由<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field" title="django.db.models.Field"><tt class="xref py py-class docutils literal"><span class="pre">Field</span></tt></a>设置）。</span></p>
<p><span class="yiyi-st" id="yiyi-513">有关使用情况，请参阅<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html#preprocessing-values-before-saving"><em>保存前预处理值</em></a>。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-514">当在字段上使用查找时，该值可能需要“准备”。</span><span class="yiyi-st" id="yiyi-515">Django公开了两种方法：</span></p>
<dl class="method">
<dt id="django.db.models.Field.get_prep_lookup">
<tt class="descname">get_prep_lookup</tt>(<em>lookup_type</em>, <em>value</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_prep_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-516">在用于查找之前，准备<tt class="docutils literal"><span class="pre">values</span></tt>到数据库。</span><span class="yiyi-st" id="yiyi-742">The <tt class="docutils literal"><span class="pre">lookup_type</span></tt> will be one of the valid Django filter lookups: <tt class="docutils literal"><span class="pre">"exact"</span></tt>, <tt class="docutils literal"><span class="pre">"iexact"</span></tt>, <tt class="docutils literal"><span class="pre">"contains"</span></tt>, <tt class="docutils literal"><span class="pre">"icontains"</span></tt>, <tt class="docutils literal"><span class="pre">"gt"</span></tt>, <tt class="docutils literal"><span class="pre">"gte"</span></tt>, <tt class="docutils literal"><span class="pre">"lt"</span></tt>, <tt class="docutils literal"><span class="pre">"lte"</span></tt>, <tt class="docutils literal"><span class="pre">"in"</span></tt>, <tt class="docutils literal"><span class="pre">"startswith"</span></tt>, <tt class="docutils literal"><span class="pre">"istartswith"</span></tt>, <tt class="docutils literal"><span class="pre">"endswith"</span></tt>, <tt class="docutils literal"><span class="pre">"iendswith"</span></tt>, <tt class="docutils literal"><span class="pre">"range"</span></tt>, <tt class="docutils literal"><span class="pre">"year"</span></tt>, <tt class="docutils literal"><span class="pre">"month"</span></tt>, <tt class="docutils literal"><span class="pre">"day"</span></tt>, <tt class="docutils literal"><span class="pre">"isnull"</span></tt>, <tt class="docutils literal"><span class="pre">"search"</span></tt>, <tt class="docutils literal"><span class="pre">"regex"</span></tt>, and <tt class="docutils literal"><span class="pre">"iregex"</span></tt>.</span></p>
<div class="versionadded">
<span class="title"><span class="yiyi-st" id="yiyi-743">新的Django 1.7。</span></span> </div>
<p><span class="yiyi-st" id="yiyi-517">如果你使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/lookups.html"><em>自定义查找</em></a>，则<tt class="docutils literal"><span class="pre">lookup_type</span></tt>可以是在字段中注册的任何<tt class="docutils literal"><span class="pre">lookup_name</span></tt>。</span></p>
<p><span class="yiyi-st" id="yiyi-518">有关用法，请参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html#preparing-values-for-use-in-database-lookups"><em>准备在数据库查找中使用的值</em></a>。</span></p>
</dd></dl>
<dl class="method">
<dt id="django.db.models.Field.get_db_prep_lookup">
<tt class="descname">get_db_prep_lookup</tt>(<em>lookup_type</em>, <em>value</em>, <em>connection</em>, <em>prepared=False</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_db_prep_lookup" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-519">类似于<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_value()</span></tt></a>，但用于执行查找。</span></p>
<p><span class="yiyi-st" id="yiyi-520">与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_db_prep_value" title="django.db.models.Field.get_db_prep_value"><tt class="xref py py-meth docutils literal"><span class="pre">get_db_prep_value()</span></tt></a>一样，将用于查询的特定连接作为<tt class="docutils literal"><span class="pre">connection</span></tt>传递。</span><span class="yiyi-st" id="yiyi-521">此外，<tt class="docutils literal"><span class="pre">prepared</span></tt>描述该值是否已经用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.get_prep_lookup" title="django.db.models.Field.get_prep_lookup"><tt class="xref py py-meth docutils literal"><span class="pre">get_prep_lookup()</span></tt></a>准备好。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-522">字段经常从不同的类型接收它们的值，从序列化或从表单。</span></p>
<dl class="method">
<dt id="django.db.models.Field.to_python">
<tt class="descname">to_python</tt>(<em>value</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.to_python" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-523">改变这个值为正确的python对象。</span><span class="yiyi-st" id="yiyi-524">它作为<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.value_to_string" title="django.db.models.Field.value_to_string"><tt class="xref py py-meth docutils literal"><span class="pre">value_to_string()</span></tt></a>的反向操作，也在<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/instances.html#django.db.models.Model.clean" title="django.db.models.Model.clean"><tt class="xref py py-meth docutils literal"><span class="pre">clean()</span></tt></a>中调用。</span></p>
<p><span class="yiyi-st" id="yiyi-525">有关用法，请参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html#converting-values-to-python-objects"><em>将值转换为Python对象</em></a>。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-526">除了保存到数据库，该字段还需要知道如何序列化其值：</span></p>
<dl class="method">
<dt id="django.db.models.Field.value_to_string">
<tt class="descname">value_to_string</tt>(<em>obj</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.value_to_string" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-527">将<tt class="docutils literal"><span class="pre">obj</span></tt>转换为字符串。</span><span class="yiyi-st" id="yiyi-528">用于序列化字段的值。</span></p>
<p><span class="yiyi-st" id="yiyi-529">有关用法，请参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html#converting-model-field-to-serialization"><em>转换字段数据以进行序列化</em></a>。</span></p>
</dd></dl>
<p><span class="yiyi-st" id="yiyi-530">当使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">模型</span> <span class="pre">表单</span></tt></a>时，<tt class="docutils literal"><span class="pre">Field</span></tt>需要知道应由哪个表单字段表示：</span></p>
<dl class="method">
<dt id="django.db.models.Field.formfield">
<tt class="descname">formfield</tt>(<em>form_class=None</em>, <em>choices_form_class=None</em>, <em>**kwargs</em>)<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.formfield" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-531">返回<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/forms/modelforms.html#django.forms.ModelForm" title="django.forms.ModelForm"><tt class="xref py py-class docutils literal"><span class="pre">ModelForm</span></tt></a>的此字段的默认<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/fields.html#django.forms.Field" title="django.forms.Field"><tt class="xref py py-class docutils literal"><span class="pre">django.forms.Field</span></tt></a>。</span></p>
<p><span class="yiyi-st" id="yiyi-532">默认情况下，如果<tt class="docutils literal"><span class="pre">form_class</span></tt>和<tt class="docutils literal"><span class="pre">choices_form_class</span></tt>都是<tt class="docutils literal"><span class="pre">None</span></tt>，则使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/fields.html#django.forms.CharField" title="django.forms.CharField"><tt class="xref py py-class docutils literal"><span class="pre">CharField</span></tt></a>；</span><span class="yiyi-st" id="yiyi-533">如果给出<tt class="docutils literal"><span class="pre">choices_form_class</span></tt>，则返回<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/forms/fields.html#django.forms.TypedChoiceField" title="django.forms.TypedChoiceField"><tt class="xref py py-class docutils literal"><span class="pre">TypedChoiceField</span></tt></a>。</span></p>
<p><span class="yiyi-st" id="yiyi-534">有关用法，请参见<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/howto/custom-model-fields.html#specifying-form-field-for-model-field"><em>为模型字段指定表单字段</em></a>。</span></p>
</dd></dl>
<dl class="method">
<dt id="django.db.models.Field.deconstruct">
<tt class="descname">deconstruct</tt>()<a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.deconstruct" title="Permalink to this definition">¶</a></dt>
<dd><div class="versionadded">
<span class="title">New in Django 1.7.</span> </div>
<p><span class="yiyi-st" id="yiyi-535">返回具有足够信息的4元组，以重新创建字段：</span></p>
<ol class="arabic simple">
<li><span class="yiyi-st" id="yiyi-657">模型上字段的名称。</span></li>
<li><span class="yiyi-st" id="yiyi-658">字段的导入路径（例如<tt class="docutils literal"><span class="pre">“django.db.models.IntegerField”</span></tt>）。</span><span class="yiyi-st" id="yiyi-744">这应该是兼容的版本，所以不要太具体可能会更好。</span></li>
<li><span class="yiyi-st" id="yiyi-659">位置参数列表。</span></li>
<li><span class="yiyi-st" id="yiyi-660">关键字参数的字典。</span></li>
</ol>
<p><span class="yiyi-st" id="yiyi-536">必须将此方法添加到1.7之前的字段，才能使用<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/topics/migrations.html"><em>迁移</em></a>迁移其数据。</span></p>
</dd></dl>
</dd></dl>
</div>
</div>
<div class="section" id="s-field-attribute-reference">
<span id="s-model-field-attributes"></span><span id="field-attribute-reference"></span><span id="model-field-attributes"></span><h1><span class="yiyi-st" id="yiyi-570">Field属性参考</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-attribute-reference" title="Permalink to this headline">¶</a></h1>
<div class="versionadded">
<span class="title">New in Django 1.8.</span> </div>
<p><span class="yiyi-st" id="yiyi-537">每个<tt class="docutils literal"><span class="pre">字段</span></tt>实例包含几个允许内省其行为的属性。</span><span class="yiyi-st" id="yiyi-538">使用这些属性而不是<tt class="docutils literal"><span class="pre">isinstance</span></tt>检查何时需要编写取决于字段功能的代码。</span><span class="yiyi-st" id="yiyi-539">这些属性可与<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/meta.html#model-meta-field-api"><em>Model._meta API</em></a>一起使用，以缩小特定字段类型的搜索范围。</span><span class="yiyi-st" id="yiyi-540">自定义模型字段应实现这些标志。</span></p>
<div class="section" id="s-attributes-for-fields">
<span id="attributes-for-fields"></span><h2><span class="yiyi-st" id="yiyi-575">字段的属性</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#attributes-for-fields" title="Permalink to this headline">¶</a></h2>
<dl class="attribute">
<dt id="django.db.models.Field.auto_created">
<tt class="descclassname">Field.</tt><tt class="descname">auto_created</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.auto_created" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-541">布尔标志，指示是否自动创建字段，例如模型继承使用的<tt class="docutils literal"><span class="pre">OneToOneField</span></tt>。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.concrete">
<tt class="descclassname">Field.</tt><tt class="descname">concrete</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.concrete" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-542">布尔标志，指示字段是否具有与其相关联的数据库列。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.hidden">
<tt class="descclassname">Field.</tt><tt class="descname">hidden</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.hidden" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-543">布尔标志，指示是否使用字段来回复另一个非隐藏字段的功能（例如，构成<tt class="docutils literal"><span class="pre">GenericForeignKey</span></tt>的<tt class="docutils literal"><span class="pre">content_type</span></tt>和<tt class="docutils literal"><span class="pre">object_id</span></tt> ）。</span><span class="yiyi-st" id="yiyi-544"><tt class="docutils literal"><span class="pre">hidden</span></tt>标志用于区分模型上的公共字段子集构成模型上的所有字段。</span></p>
<div class="admonition note">
<p class="first admonition-title"><span class="yiyi-st" id="yiyi-545">注意</span></p>
<p class="last"><span class="yiyi-st" id="yiyi-546"><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/meta.html#django.db.models.options.Options.get_fields" title="django.db.models.options.Options.get_fields"><tt class="xref py py-meth docutils literal"><span class="pre">Options.get_fields()</span></tt></a>默认排除隐藏字段。</span><span class="yiyi-st" id="yiyi-547">传入<tt class="docutils literal"><span class="pre">include_hidden = True</span></tt>可返回结果中的隐藏字段。</span></p>
</div>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.is_relation">
<tt class="descclassname">Field.</tt><tt class="descname">is_relation</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.is_relation" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-548">布尔标志，指示字段是否包含对一个或多个其他模型的功能的引用（例如<tt class="docutils literal"><span class="pre">ForeignKey</span></tt>，<tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>，<tt class="docutils literal"><span class="pre">OneToOneField</span></tt>等） 。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.model">
<tt class="descclassname">Field.</tt><tt class="descname">model</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.model" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-549">返回定义字段的模型。</span><span class="yiyi-st" id="yiyi-550">如果在模型的超类上定义了字段，则<tt class="docutils literal"><span class="pre">模型</span></tt>将引用超类，而不是实例的类。</span></p>
</dd></dl>
</div>
<div class="section" id="s-attributes-for-fields-with-relations">
<span id="attributes-for-fields-with-relations"></span><h2><span class="yiyi-st" id="yiyi-576">具有关系的字段的属性</span><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#attributes-for-fields-with-relations" title="Permalink to this headline">¶</a></h2>
<p><span class="yiyi-st" id="yiyi-551">这些属性用于查询关系的基数和其他详细信息。</span><span class="yiyi-st" id="yiyi-552">这些属性存在于所有字段上；</span><span class="yiyi-st" id="yiyi-553">但是，如果字段是关系类型（<a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.is_relation" title="django.db.models.Field.is_relation"><tt class="xref py py-attr docutils literal"><span class="pre">Field.is_relation=True</span></tt></a>），则它们只有布尔值（而不是<tt class="docutils literal"><span class="pre">None</span></tt>）。</span></p>
<dl class="attribute">
<dt id="django.db.models.Field.many_to_many">
<tt class="descclassname">Field.</tt><tt class="descname">many_to_many</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.many_to_many" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-554">如果字段具有多对多关系，则布尔标志为<tt class="docutils literal"><span class="pre">True</span></tt>；</span><span class="yiyi-st" id="yiyi-555">否则为<tt class="docutils literal"><span class="pre">False</span></tt>。</span><span class="yiyi-st" id="yiyi-556">Django中包含的仅有<tt class="docutils literal"><span class="pre">True</span></tt>的字段为<tt class="docutils literal"><span class="pre">ManyToManyField</span></tt>。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.many_to_one">
<tt class="descclassname">Field.</tt><tt class="descname">many_to_one</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.many_to_one" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-557">如果字段具有多对一关系，例如<tt class="docutils literal"><span class="pre">ForeignKey</span></tt>，则布尔标志为<tt class="docutils literal"><span class="pre">True</span></tt>；</span><span class="yiyi-st" id="yiyi-558">否则为<tt class="docutils literal"><span class="pre">False</span></tt>。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.one_to_many">
<tt class="descclassname">Field.</tt><tt class="descname">one_to_many</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.one_to_many" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-559">如果字段具有一对多关系（例如<tt class="docutils literal"><span class="pre">GenericRelation</span></tt>或<tt class="docutils literal"><span class="pre">ForeignKey</span></tt>的反向），则<tt class="docutils literal"><span class="pre">True</span></tt>的布尔标志；</span><span class="yiyi-st" id="yiyi-560">否则为<tt class="docutils literal"><span class="pre">False</span></tt>。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.one_to_one">
<tt class="descclassname">Field.</tt><tt class="descname">one_to_one</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.one_to_one" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-561">如果字段具有一对一关系，例如<tt class="docutils literal"><span class="pre">OneToOneField</span></tt>，则布尔标志为<tt class="docutils literal"><span class="pre">True</span></tt>；</span><span class="yiyi-st" id="yiyi-562">否则为<tt class="docutils literal"><span class="pre">False</span></tt>。</span></p>
</dd></dl>
<dl class="attribute">
<dt id="django.db.models.Field.related_model">
<tt class="descclassname">Field.</tt><tt class="descname">related_model</tt><a class="headerlink" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#django.db.models.Field.related_model" title="Permalink to this definition">¶</a></dt>
<dd><p><span class="yiyi-st" id="yiyi-563">指向字段涉及的模型。</span><span class="yiyi-st" id="yiyi-564">例如，<tt class="docutils literal"><span class="pre">ForeignKey(Author)</span></tt>中的<tt class="docutils literal"><span class="pre">Author</span></tt>。</span><span class="yiyi-st" id="yiyi-565">如果字段具有通用关系（例如<tt class="docutils literal"><span class="pre">GenericForeignKey</span></tt>或<tt class="docutils literal"><span class="pre">GenericRelation</span></tt>），则<tt class="docutils literal"><span class="pre">related_model</span></tt>将为<tt class="docutils literal"><span class="pre">None</span></tt>。</span></p>
</dd></dl>
</div>
</div>
</div>
</div>
</div>
<div class="yui-b" id="sidebar">
<div class="sphinxsidebar">
<div class="sphinxsidebarwrapper">
<h3><span class="yiyi-st" id="yiyi-624">目录</span></h3>
<ul>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#"><span class="yiyi-st" id="yiyi-661">模型字段参考</span></a><ul>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-options"><span class="yiyi-st" id="yiyi-662" style="">字段选项</span></a><ul>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#null"><span class="yiyi-st" id="yiyi-663" style="">null</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#blank"><span class="yiyi-st" id="yiyi-664" style="">blank</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#choices"><span class="yiyi-st" id="yiyi-665" style="">choices</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#db-column"><span class="yiyi-st" id="yiyi-666" style="">db_column</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#db-index"><span class="yiyi-st" id="yiyi-667" style="">db_index</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#db-tablespace"><span class="yiyi-st" id="yiyi-668" style="">db_tablespace</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#default"><span class="yiyi-st" id="yiyi-669" style="">default</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#editable"><span class="yiyi-st" id="yiyi-670" style="">editable</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#error-messages"><span class="yiyi-st" id="yiyi-671" style="">error_messages</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#help-text"><span class="yiyi-st" id="yiyi-672" style="">help_text</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#primary-key"><span class="yiyi-st" id="yiyi-673" style="">primary_key（主键）</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#unique"><span class="yiyi-st" id="yiyi-674" style="">unique（唯一性）</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#unique-for-date"><span class="yiyi-st" id="yiyi-675">unique_for_date</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#unique-for-month"><span class="yiyi-st" id="yiyi-676">unique_for_month</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#unique-for-year"><span class="yiyi-st" id="yiyi-677">unique_for_year</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#verbose-name"><span class="yiyi-st" id="yiyi-678">verbose_name</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#validators"><span class="yiyi-st" id="yiyi-679" style="">验证器</span></a><ul>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#registering-and-fetching-lookups"><span class="yiyi-st" id="yiyi-680">注册和获取查询</span></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-types"><span class="yiyi-st" id="yiyi-681">字段类型</span></a><ul>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#autofield"><span class="yiyi-st" id="yiyi-682">AutoField自增字段</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#bigintegerfield"><span class="yiyi-st" id="yiyi-683">BigIntegerField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#binaryfield"><span class="yiyi-st" id="yiyi-684">二进制字段</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#booleanfield"><span class="yiyi-st" id="yiyi-685">BooleanField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#charfield"><span class="yiyi-st" id="yiyi-686">CharField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#commaseparatedintegerfield"><span class="yiyi-st" id="yiyi-687">CommaSeparatedIntegerField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#datefield"><span class="yiyi-st" id="yiyi-688">rendering</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#datetimefield"><span class="yiyi-st" id="yiyi-689">DateTimeField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#decimalfield"><span class="yiyi-st" id="yiyi-690">DecimalField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#durationfield"><span class="yiyi-st" id="yiyi-691">DurationField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#emailfield"><span class="yiyi-st" id="yiyi-692">EmailField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#filefield"><span class="yiyi-st" id="yiyi-693">FileField</span></a><ul>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#filefield-and-fieldfile"><span class="yiyi-st" id="yiyi-694">FileField和FieldFile</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#filepathfield"><span class="yiyi-st" id="yiyi-695">FilePathField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#floatfield"><span class="yiyi-st" id="yiyi-696">FloatField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#imagefield"><span class="yiyi-st" id="yiyi-697">ImageField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#integerfield"><span class="yiyi-st" id="yiyi-698">IntegerField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#ipaddressfield"><span class="yiyi-st" id="yiyi-699">IPAddressField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#genericipaddressfield"><span class="yiyi-st" id="yiyi-700">GenericIPAddressField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#nullbooleanfield"><span class="yiyi-st" id="yiyi-701">NullBooleanField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#positiveintegerfield"><span class="yiyi-st" id="yiyi-702">PositiveIntegerField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#positivesmallintegerfield"><span class="yiyi-st" id="yiyi-703">PositiveSmallIntegerField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#slugfield"><span class="yiyi-st" id="yiyi-704">SlugField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#smallintegerfield"><span class="yiyi-st" id="yiyi-705">SmallIntegerField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#textfield"><span class="yiyi-st" id="yiyi-706">TextField（文本域）</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#timefield"><span class="yiyi-st" id="yiyi-707">TimeField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#urlfield"><span class="yiyi-st" id="yiyi-708">URLField</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#uuidfield"><span class="yiyi-st" id="yiyi-709">UUIDField</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#module-django.db.models.fields.related"><span class="yiyi-st" id="yiyi-710">关联字段</span></a><ul>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#foreignkey"><span class="yiyi-st" id="yiyi-711">外键</span></a><ul>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#database-representation"><span class="yiyi-st" id="yiyi-712">数据库中表示</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#arguments"><span class="yiyi-st" id="yiyi-713">参数</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#manytomanyfield"><span class="yiyi-st" id="yiyi-714">ManyToManyField</span></a><ul>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#id1"><span class="yiyi-st" id="yiyi-715">数据库中的表示</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#manytomany-arguments"><span class="yiyi-st" id="yiyi-716">参数</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#onetoonefield"><span class="yiyi-st" id="yiyi-717">OneToOneField</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-api-reference"><span class="yiyi-st" id="yiyi-718">字段API 参考</span></a></li>
</ul>
</li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#field-attribute-reference"><span class="yiyi-st" id="yiyi-719">字段属性引用</span></a><ul>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#attributes-for-fields"><span class="yiyi-st" id="yiyi-720">字段的属性</span></a></li>
<li><a class="reference internal" href="http://python.usyiyi.cn/documents/django_182/ref/models/fields.html#attributes-for-fields-with-relations"><span class="yiyi-st" id="yiyi-721">具有关系的字段的属性</span></a></li>
</ul>
</li>
</ul>
<h3><span class="yiyi-st" id="yiyi-625">浏览</span></h3>
<ul>
<li><span class="yiyi-st" id="yiyi-722">上一个：<a href="http://python.usyiyi.cn/documents/django_182/ref/models/index.html">模型</a></span></li>
<li><span class="yiyi-st" id="yiyi-723">下一页：<a href="http://python.usyiyi.cn/documents/django_182/ref/models/meta.html">模型<tt class="docutils literal"><span class="pre">_meta</span></tt> API</a></span></li>
</ul>
<h3><span class="yiyi-st" id="yiyi-626">你在这里：</span></h3>
<ul>
<li>
<a href="http://python.usyiyi.cn/documents/django_182/index.html"><span class="yiyi-st" id="yiyi-724">Django 1.8.2 文档</span></a>
<ul><li><a href="http://python.usyiyi.cn/documents/django_182/ref/index.html"><span class="yiyi-st" id="yiyi-725">API参考</span></a>
<ul><li><a href="http://python.usyiyi.cn/documents/django_182/ref/models/index.html"><span class="yiyi-st" id="yiyi-726">楷模</span></a>
<ul><li><span class="yiyi-st" id="yiyi-727">模型字段引用</span></li></ul>
</li></ul></li></ul>
</li>
</ul>
<h3><span class="yiyi-st" id="yiyi-627">这一页</span></h3>
<ul class="this-page-menu">
<li><a href="http://python.usyiyi.cn/documents/django_182/_sources/ref/models/fields.txt" rel="nofollow"><span class="yiyi-st" id="yiyi-728">显示源</span></a></li>
</ul>
<div id="searchbox" style="">
<h3><span class="yiyi-st" id="yiyi-628">快速搜索</span></h3>
<form action="http://python.usyiyi.cn/documents/django_182/search.html" class="search" method="get">
<input name="q" type="text">
<input type="submit" value="Go">
<input name="check_keywords" type="hidden" value="yes">
<input name="area" type="hidden" value="default">
</form>
<p class="searchtip" style="font-size: 90%"><span class="yiyi-st" id="yiyi-566">输入搜索字词或模块，类或函数名称。</span></p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
</div>
</div>
<h3><span class="yiyi-st" id="yiyi-629">最后更新：</span></h3>
<p class="topless"><span class="yiyi-st" id="yiyi-567">2015年5月13日</span></p>
</div>
</div>
<div id="ft">
<div class="nav">
    « <a href="http://python.usyiyi.cn/documents/django_182/ref/models/index.html" title="Models">previous</a>
     |
    <a accesskey="U" href="http://python.usyiyi.cn/documents/django_182/ref/index.html" title="API Reference">up</a>
   |
    <a href="http://python.usyiyi.cn/documents/django_182/ref/models/meta.html" title="Model &lt;tt class=&quot;docutils literal&quot;&gt;&lt;span class=&quot;pre&quot;&gt;_meta&lt;/span&gt;&lt;/tt&gt; API">next</a> »</div>
</div>
</div>
<div class="clearer"></div>
</div>
</body></html>